(this["webpackJsonp@livechat/chat-widget"]=this["webpackJsonp@livechat/chat-widget"]||[]).push([[4],{683:function(e,t,n){"use strict";n.r(t);var r=n(3),i=n(0),a=n.n(i),o=n(31),c=n(26),l=n(7),s=n(10),u=n(1),d=n(39),m=n(2),f=n(5),b=n(481),p=n(98),g=n(135),h=n(69),v=n(16),j=n(226),O=n(6),x=n(12),y=n(480),w=function(e,t){var n=new Date(e);return n.toLocaleDateString()===(new Date).toLocaleDateString()?t.today(n):function(e){var t=new Date;return t.setDate(t.getDate()-1),e.toLocaleDateString()===t.toLocaleDateString()}(n)?t.yesterday(n):n.toLocaleDateString([],{year:"numeric",month:"2-digit",day:"2-digit"})},E=function(){return"IntersectionObserver"in window&&"IntersectionObserverEntry"in window},k=function(e,t,n){var r=Object(m.Db)(t).sort((function(e,t){return e.timestamp-t.timestamp})),i=Object(m.q)((function(t){return t.node===e}),r);if(i>-1)return{currentTimestamp:r[i].timestamp,previousTimestamp:i>0?r[i-1].timestamp:n}},A=function(e,t){var n=i.useRef({beginingOfTime:t,currentTimestamp:0,subscribers:[],dividers:{}}),r=function(e){var t={timestamp:e,direction:e>n.current.currentTimestamp?"down":"up"};n.current.currentTimestamp=e,n.current.subscribers.forEach((function(e){return e(t)}))},a=function(e){var t=e.rootRef,n=e.rootMargin,r=e.threshold,a=e.intersectionHandler;if(E()){var o=i.useRef(null),l=i.useRef([]),s=Object(c.m)(a);return i.useEffect((function(){return o.current=new IntersectionObserver((function(e,t){s.current&&s.current(e,t)}),{root:t.current,rootMargin:n,threshold:r}),l.current.forEach((function(e){return o.current.observe(e)})),l.current=[],function(){return o.current.disconnect()}}),[n,r,t,s]),Object(c.d)((function(){return{add:function(e){o.current?o.current.observe(e):l.current.push(e)},remove:function(e){o.current?o.current.unobserve(e):l.current=l.current.filter((function(t){return t!==e}))}}}))}}({rootRef:e,intersectionHandler:function(e){var t=function(e,t,n){var r=e.filter((function(e){return e.isIntersecting})).sort((function(e,t){return e.boundingClientRect.top-t.boundingClientRect.top}))[0];if(r){var i=k(r.target,t,n);return i&&i.previousTimestamp}var a=e.filter((function(e){return e.boundingClientRect.top<=e.rootBounds.top})).sort((function(e,t){return e.boundingClientRect.top-t.boundingClientRect.top})).reverse()[0];if(a){var o=k(a.target,t,n);return o&&o.currentTimestamp}}(e,n.current.dividers,n.current.beginingOfTime);t&&r(t)},threshold:.2});return i.useEffect((function(){var e=Object(m.Db)(n.current.dividers).map((function(e){return e.timestamp})),t=Math.max.apply(Math,e.concat([n.current.beginingOfTime]));n.current.currentTimestamp=t,n.current.subscribers.forEach((function(e){return e({timestamp:t,direction:"up"})}))}),[]),Object(c.d)((function(){return{add:function(e){n.current.dividers[e.timestamp]=e,a&&a.add(e.node)},remove:function(e){a&&a.remove(e.node),delete n.current.dividers[e.timestamp]},subscribe:function(e){n.current.subscribers.push(e)},unsubscribe:function(e){n.current.subscribers=n.current.subscribers.filter((function(t){return t!==e}))},setBeginingOfTime:function(e){n.current.beginingOfTime=e},currentTimestamp:function(){return n.current.currentTimestamp},setToNewestTimestamp:function(){var e=Object.keys(n.current.dividers).map(Number).sort((function(e,t){return t-e}))[0];r(e)}}}))},S=i.createContext(null),C=function(){return i.useContext(S)},T=function(e){var t=e.children,n=e.rootRef,r=e.beginingOfTime,a=e.isOnBottomSource,o=A(n,null!=r?r:0);return i.useEffect((function(){o.setBeginingOfTime(null!=r?r:0)})),i.useEffect((function(){return a.subscribe((function(e){e&&o.setToNewestTimestamp()}))}),[a,o]),i.createElement(S.Provider,{value:o},t)};var _=Object(f.A)("span",{displayName:"DividerLabel",target:"eceo2x80"})({name:"1rpc86p",styles:"padding:4px 8px;font-size:12px;position:relative;padding:0 8px;&:before,&:after{content:'';width:50vw;height:0;border-top:1px solid;border-top-color:inherit;position:absolute;top:50%;}&:before{right:100%;}&:after{left:100%;}"});function I(){var e=Object(x.a)(["\n\t&-enter ",", &-exit "," {\n\t\tposition: relative;\n\t}\n\n\t&-enter "," {\n\t\ttop: ",";\n\t}\n\t&-enter-active "," {\n\t\ttop: 0;\n\t\ttransition: top ","ms ease-out;\n\t}\n\n\t&-exit {\n\t\topacity: 1;\n\t}\n\t&-exit-active {\n\t\topacity: 0;\n\t\ttransition: opacity ","ms ease-out;\n\t}\n\n\t&-exit "," {\n\t\ttop: 0;\n\t\tposition: relative;\n\t}\n\t&-exit-active "," {\n\t\ttop: ",";\n\t\ttransition: top ","ms ease-out;\n\t}\n"]);return I=function(){return e},e}var R={name:"sx4ymz",styles:"opacity:0;pointer-events:none"},z=Object(f.A)(_,{target:"e1g4em791"})("color:",(function(e){return e.theme.colors.primaryTextColor}),";overflow:hidden;border:1px solid ",(function(e){return e.theme.colors.divider}),";background-color:",(function(e){return e.theme.colors.surface}),";border-radius:",(function(e){return e.theme.borderRadius.md}),";padding:2px 6px;transition:opacity 150ms linear;",(function(e){return!e.visible&&R}),";"),M=Object(f.A)("span",{target:"e1g4em790"})(""),F=200;var H=E()?function(e){var t=e.isUserScrollingSource,n=Object(O.a)(e,["isUserScrollingSource"]),a=Object(c.w)(t),l=C(),s=i.useState({direction:"up",timestamp:l.currentTimestamp()}),d=s[0],m=s[1];return i.useEffect((function(){l.subscribe(m);var e=l.currentTimestamp();return e!==d.timestamp&&m({direction:"up",timestamp:e}),function(){return l.unsubscribe(m)}}),[l]),d.timestamp?i.createElement(o.a,null,(function(e){var t=w(d.timestamp,{today:function(){return e("today")},yesterday:function(){return e("yesterday")}});return i.createElement(r.a,null,(function(e){var r=function(e,t){return e(I(),String(M),String(M),String(M),"up"===t?"-2em":"2em",String(M),F,F,String(M),String(M),"up"===t?"2em":"-2em",F)}(e.css,d.direction);return i.createElement(b.a,{component:null,childFactory:function(e){return i.cloneElement(e,{classNames:r})}},i.createElement(y.a,{key:t,classNames:r,timeout:F},i.createElement(z,Object(u.a)({},n,{visible:a}),i.createElement(M,null,t))))}))})):null}:function(){return null},P=function(e){var t=C();i.useEffect((function(){var n={timestamp:e.timestamp,node:e.nodeRef.current};return t.add(n),function(){t.remove(n)}}),[])};var q=Object(f.A)("div",{target:"ehmqpie0"})({name:"1wai6wj",styles:"height:20px;margin:16px -0.5em;text-align:center;overflow:hidden"}),D=function(e){var t=e.timestamp,n=i.useRef(null);return P({timestamp:t,nodeRef:n}),i.createElement(o.a,null,(function(e){return i.createElement(q,{ref:n},i.createElement(_,null,w(t,{today:function(e){return e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})},yesterday:function(){return e("yesterday")}})))}))},B=n(25);var L=Object(f.A)("div",{displayName:"NewMessageHorizontalDivider",target:"eacid5n1"})({name:"gbe43y",styles:"height:27px;margin:16px -0.5em;text-align:center;overflow:hidden"}),N=Object(f.A)(B.Q,{target:"eacid5n0"})({name:"1c0l2b2",styles:"display:inline-flex;padding:2px 12px;font-weight:normal;box-shadow:none;height:auto;&:before,&:after{border-top:0;}"}),U=function(e){var t=e.unseenCount,n=e.setScrollTargetNode,r=i.useRef(null),a=i.useState(!0),l=a[0],s=a[1];return Object(c.o)((function(){r.current&&n(r.current)})),i.useEffect((function(){var e=setTimeout((function(){return s(!1)}),625);return function(){return clearTimeout(e)}}),[]),i.createElement(o.a,null,(function(e){return i.createElement(L,{ref:r},i.createElement(N,{animated:l,minScale:.9,maxScale:1.05},e(1===t?"new_message":"new_messages")))}))},V=n(15),W=Object(f.A)("div",{displayName:"Divider",target:"evqzb400"})("border-top:",(function(e){return"1px solid "+e.theme.colors.lighterOppositeTitleBarColor}),";margin:0;margin-bottom:-1px;z-index:10;position:relative;"),Y=Object(f.A)("div",{target:"ekfrplk0"})((function(e){return e.theme.typography.basic})," color:",(function(e){return e.theme.colors.textPrimary}),";line-height:1.2;color:inherit;display:flex;width:100%;flex-direction:",(function(e){return e.row?"row":"column"}),";"),G=n(663),K=n(129),Q=n(264),J=n(13),X=n(57),Z=n.n(X),$=n(88),ee=n(656),te=function(e,t){return t.getElementById(e)},ne=function(e){var t=e.portalId,n=void 0===t?ee.a:t,r=e.children,a=Object($.useFrame)().document,o=i.useState((function(){return te(n,a)})),l=o[0],s=o[1];return Object(c.o)((function(){l||s(te(n,a))})),l?X.createPortal(r,l):null},re=n(18);function ie(){var e=Object(x.a)(["\n\t&-enter,\n\t&-appear {\n\t\tbackground-color: rgba(0, 0, 0, 0);\n\t}\n\n\t&-enter-active,\n\t&-appear-active,\n\t&-enter-done,\n\t&-appear-done {\n\t\tbackground-color: ",";\n\t\ttransition: background-color ","ms ",";\n\t}\n\n\t&-exit {\n\t\tbackground-color: ",";\n\t}\n\n\t&-exit-active,\n\t&-exit-done {\n\t\tbackground-color: rgba(0, 0, 0, 0);\n\t\ttransition: background-color ","ms ",";\n\t\ttransition-delay: ","ms;\n\t}\n"]);return ie=function(){return e},e}var ae=300,oe=function(e){return{enter:ae,exit:e+ae}},ce=function(e){return"light"===e?"rgba(0, 0, 0, 0.5)":"rgba(0, 0, 0, 0.7)"},le=function(e,t,n){return e(ie(),ce(n.variant),ae,n.transitions.easings.smooth,ce(n.variant),ae,n.transitions.easings.smooth,t)},se=function(e){var t=e.zIndex;return Object(r.c)("z-index:",t,";position:absolute;top:0;left:0;right:0;bottom:0;border-radius:inherit;")},ue=function(e){var t=e.zIndex,n=Object(O.a)(e,["zIndex"]),a=i.useRef(null);return Object(c.g)("touchmove",a),Object(r.d)("div",Object(u.a)({ref:a,css:se({zIndex:t})},n))},de=function(e){var t=e.shown,n=e.onPress,i=e.exitDelay,a=void 0===i?100:i,o=e.zIndex,c=void 0===o?999:o,l=Object(re.m)({onPress:n}).pressProps;return Object(r.d)(r.a,null,(function(e){var n=e.css,i=e.theme;return Object(r.d)(b.a,{appear:!0,component:null},t&&Object(r.d)(y.a,{classNames:le(n,a,i),timeout:oe(a)},Object(r.d)(ue,Object(u.a)({zIndex:c},l))))}))},me=i.memo(de),fe=n(75),be=n(168);var pe={name:"jubs0u",styles:"margin:0;background:transparent"},ge=function(e){return Object(r.c)("position:absolute;z-index:1500;width:calc(100% - 2rem);max-width:290px;top:1em;left:50%;color:",e.colors.primaryTextColor,";background:",e.colors.surface,";box-shadow:",e.boxShadow.lg,";padding:",1*e.spaceBase,"px;border-radius:",e.borderRadius.xl,";")},he=Object(f.A)("div",{target:"e1yhh5l71"})({name:"4hray5",styles:"display:flex;flex-direction:row-reverse"}),ve=Object(f.A)("div",{target:"e1yhh5l70"})("padding:",(function(e){return 1*e.theme.spaceBase}),"px;padding-top:0;"),je=i.forwardRef((function(e,t){var n=e.onClose,i=void 0===n?m.W:n,a=e.children,o=e["aria-label"],c=e["aria-labelledby"],l=e.isPreview,s=Object(O.a)(e,["onClose","children","aria-label","aria-labelledby","isPreview"]);Object(Q.d)({isDisabled:l});var d=Object(Q.c)({isOpen:!0,isDismissable:!0,onClose:i},t).overlayProps,f=Object(Q.b)().modalProps,b=Object(G.a)({"aria-label":o,"aria-labelledby":c},t).dialogProps;return Object(r.d)(K.a,{contain:!0,autoFocus:!0,restoreFocus:!0},Object(r.d)("div",Object(u.a)({},Object(J.h)(s,d,f,b),{ref:t,css:ge}),Object(r.d)(he,null,Object(r.d)(B.q,{css:pe,onPress:i,"aria-label":"Close modal"},Object(r.d)(B.g,{"aria-hidden":!0}))),Object(r.d)(ve,null,a)))})),Oe=function(e){var t=e.onClose,n=void 0===t?m.W:t,a=e.shown,o=e.children,c=Object(O.a)(e,["onClose","shown","children"]),l=i.useRef(null),s=Object(fe.b)(),d=Object(be.b)();return i.useEffect((function(){return d.setModalOpen(a)}),[a,d]),Object(r.d)(ne,null,Object(r.d)(me,{shown:a,onPress:n,exitDelay:25}),Object(r.d)(b.a,{component:null},a&&Object(r.d)(j.b,{nodeRef:l},Object(r.d)(je,Object(u.a)({onClose:n,ref:l,isPreview:s},c),o))))},xe=n(645),ye=n(664),we=Object(f.A)("form",{displayName:"Form",section:!0,target:"e1nyj5rz0"})(""),Ee=n(644),ke=n(643),Ae=n(190);var Se=Object(f.A)("div",{target:"e1n7ru1l0"})({name:"1azakc",styles:"text-align:center"}),Ce=[ke.e],Te=function(e){var t=e.id,n=e.children,r=e.initialValues,a=e.submitLabel,o=e.validate,l=e.onSubmit,s=e.disabled,u="form_"+t;return Object(c.o)((function(){Object(Ae.c)()&&function(e){var t=Object(ye.b)(e)();if(t.length){var n=t[0],r=n.tagName;("INPUT"===r&&!Object(m.E)(n.type,["checkbox","radio"])||"TEXTAREA"===r)&&Object(J.d)(n)}}(u)})),i.createElement(xe.b,{decorators:Ce,initialValues:r,onSubmit:l,subscription:ke.a,validate:o},(function(e){var t=e.handleSubmit;return i.createElement(we,{name:u,onSubmit:t},n,i.createElement(Ee.j,null),i.createElement(Se,null,i.createElement(xe.c,{subscription:ke.b},(function(e){var t=e.submitting;return i.createElement(Ee.i,{submitting:t,label:a,disabled:s})}))))}))},_e=n(658);var Ie=Object(f.A)("div",{target:"e1lbo1s41"})({name:"175oc9c",styles:"display:flex;justify-content:center;flex-shrink:0"}),Re=Object(f.A)("div",{displayName:"IconLabel",target:"e1lbo1s40"})("display:flex;justify-content:center;align-items:center;",(function(e){var t=e.size,n=e.theme;return{width:t,height:t,borderRadius:n.borderRadius.round,backgroundColor:n.colors.surfaceDecorative}}),";"),ze=function(e){var t=e.size,n=void 0===t?"64px":t,r=e.children,a=Object(O.a)(e,["size","children"]);return i.createElement(Ie,null,i.createElement(Re,Object(u.a)({size:n},a),r))},Me=n(673),Fe=n(680);var He=10,Pe=Object(f.A)("div",{displayName:"Tooltip",target:"ezqijrk2"})("display:inline-block;background-color:",(function(e){var t=e.theme,n=e.kind;return t.colors[n+"Surface"]}),";color:",(function(e){var t=e.theme;return"hint"===e.kind?t.colors.grayscale[0]:t.colors.primaryTextColor}),";padding:1em;position:fixed;border-radius:",(function(e){return e.theme.borderRadius.lg}),";z-index:9;font-size:0.8em;font-weight:normal;margin-top:0.5em;margin-bottom:0.5em;box-shadow:",(function(e){return e.theme.boxShadow.floating}),";transition:",(function(e){var t=e.theme;return"opacity 200ms "+t.transitions.easings.swift+", transform 300ms "+t.transitions.easings.swift}),";",(function(e){var t=e.position;return{left:t.left?t.left-He+"px":"auto",right:t.right?t.right-He+"px":"auto",top:t.top?t.top+"px":"auto",bottom:t.bottom?t.bottom:"auto",marginRight:t.right?0:"10px",marginLeft:t.left?0:"10px"}}),";"),qe=Object(f.A)("svg",{displayName:"TooltipArrow",target:"ezqijrk1"})("position:absolute;fill:",(function(e){var t=e.theme,n=e.kind;return t.colors[n+"Surface"]}),";margin-top:-1.5em;margin-bottom:-1.5em;",(function(e){var t=e.position,n=e.horizontalFactor,r=e.placement,i=void 0===r?"top":r,a=e.theme;return Object(u.a)({left:t.left?n-He+("modern"===a.name?3:-1)+"px":"auto",right:t.right?n-He+("modern"===a.name?3:-1)+"px":"auto"},"bottom"===i?{top:0}:{bottom:0,transform:"rotate(180deg)"})}),";"),De=Object(f.A)("div",{target:"ezqijrk0"})({name:"bjn8wh",styles:"position:relative"}),Be=function(e,t,n){var r=e.getBoundingClientRect(),i=r.left,a=r.right,o=r.bottom,c=r.top,l=n.window,s=l.innerWidth,d=l.innerHeight,m=l.pageXOffset,f=l.pageYOffset,b="top"===t?{bottom:d-(c+f)}:{top:o+f},p=i+m>s/2?{right:s-(a+m)}:{left:i+m};return Object(u.a)({},b,p)},Le={position:{top:0,left:0},targetWidth:0};var Ne=function(e){var t=e.children,n=e.description,r=e.allowTouch,a=e.controlsRef,o=e.animated,l=void 0!==o&&o,s=e.placement,d=void 0===s?"bottom":s,f=e.trigger,b=void 0===f?"hover":f,p=e.onOpenChange,g=void 0===p?m.W:p,h=e.kind,v=void 0===h?"hint":h,j=Object(O.a)(e,["children","description","allowTouch","controlsRef","animated","placement","trigger","onOpenChange","kind"]),x=i.useRef(null);Object(re.k)();var y=i.useRef(null),w=i.useRef(!1),E=i.useState(Le),k=E[0],A=E[1],S=i.useState(!1),C=S[0],T=S[1],_=Object($.useFrame)(),I=Object(Fe.a)(Object(u.a)({onOpenChange:function(e){l&&requestAnimationFrame((function(){return T(e)}));var t=function(){g(e,w.current),w.current=!1};e?(A({position:Be(y.current,d,_),targetWidth:y.current.offsetWidth}),requestAnimationFrame(t)):t()}},j));(null==a?void 0:a.current)&&(a.current={open:function(){w.current=!0,I.open(!0)},close:function(){w.current=!0,I.close(!0)}});var R,z=Object(Me.b)(j,I,y),M=z.tooltipProps,F=z.triggerProps,H=Object(Me.a)(M,I).tooltipProps,P=Object(re.m)({onPress:function(){I.open(!0)}}).pressProps;return Object(c.n)(x,(function(e){y.current.contains(e.target)||I.close(!0)}),_),j.isDisabled&&I.isOpen&&I.close(),i.createElement(K.b,Object(u.a)({},"press"===b?P:r?Object(J.h)(F,P):F,{ref:y}),t,I.isOpen&&i.createElement(ne,{portalId:ee.b},i.createElement(Pe,Object(u.a)({ref:x,position:k.position,kind:v},"hover"===b&&H,l&&{style:{opacity:(R=C)?1:0,transform:"translateY("+(R?0:8)+"px)"}}),i.createElement(De,null,i.createElement(qe,{placement:d,kind:v,horizontalFactor:k.targetWidth/2,height:"10",position:k.position,width:"16"},i.createElement("polygon",{points:"0,10 16,10 8,0"})),n))))};var Ue="add_rate_comment_label",Ve={name:"1azakc",styles:"text-align:center"},We={name:"870gjp",styles:"font-size:inherit"},Ye={name:"l3iapi",styles:"margin-right:6px;margin-left:0"},Ge=Object(f.A)(B.q,{target:"e1mt5al70"})((function(e){var t=e.theme;return t.isRtl&&"smooth"===t.name&&Ye}),";"),Ke=Object(o.c)((function(e,t){var n=t.chatId,r=e.getApplicationState("isPreview"),i=r?function(){return Promise.resolve()}:function(t){var r=t.rate,i=t.comment,a={};return void 0!==r&&(a.rate=r),void 0!==i&&(a.rateComment=i),e.requestUpdateChat(n,{properties:a})};return function(e){var t=e.getChat(n),a=t.active,o=t.properties,c=o.ended;return{chatRate:o.rate,disabled:!r&&(!c&&!a),mobile:e.getApplicationState("mobile"),rateChat:i,localize:e.localize,isPreview:r}}}))((function(e){var t=e.chatRate,n=e.disabled,a=e.mobile,o=e.rateChat,c=e.localize,l=e.isPreview,s=i.useState(!1),u=s[0],d=s[1],m=i.useState(t),b=m[0],p=m[1],g=i.useCallback((function(e){return function(){var n=b===e,r=n?null:e;o({rate:r}).catch((function(){return p(t)})),p(r),d(!n)}}),[b,t,o]);i.useEffect((function(){p(t)}),[t]);var h=function(e){return{disabled:n,active:t===e,onPress:g(e),"aria-label":c(t===e?"cancel_"+e+"_rating":"rate_"+e+"_and_open_modal")}},v=c("good"===t?"rate_me_cancel_tooltip":"rate_me_good_tooltip"),j=c("bad"===t?"rate_me_cancel_tooltip":"rate_me_bad_tooltip");return Object(r.d)(i.Fragment,null,Object(r.d)(Ne,{isDisabled:n,description:v},Object(r.d)(Ge,h("good"),Object(r.d)(B.N,{css:We,"aria-hidden":!0}))),Object(r.d)(Ne,{isDisabled:n,description:j},Object(r.d)(Ge,h("bad"),Object(r.d)(B.M,{css:We,"aria-hidden":!0}))),Object(r.d)(Oe,{shown:u,onClose:function(){return d(!1)}},Object(r.d)(ze,null,"good"===b?Object(r.d)(B.N,{label:c("rate_me_confirmation_good")}):Object(r.d)(B.M,{label:c("rate_me_confirmation_bad")})),Object(r.d)("p",{id:Ue,css:Ve},c("rate_me_add_comment")),Object(r.d)(Te,{id:"rate_comment",mobile:a,onSubmit:function(e){o({comment:e.comment}),d(!1)},submitLabel:c("button_add_feedback"),validate:function(e){return e.comment?{}:{comment:c("survey_fill_in_required_fields")}},disabled:l},Object(r.d)(f.q,null,Object(r.d)(_e.a,{label:"",serverName:"",type:"textarea",name:"comment",localize:function(){return c("rate_me_placeholder")},ariaLabelledBy:Ue,required:!0})))))}));var Qe={name:"1wcfv52",styles:"margin-right:0"},Je=Object(f.A)("div",{target:"ekqutxs1"})("display:flex;align-items:center;position:relative;",(function(e){var t=e.theme;return Object(r.c)("margin-",t.isRtl?"left":"right",":0.5em;")}),";"),Xe=Object(f.A)("div",{target:"ekqutxs0"})("position:absolute;",(function(e){var t=e.availability,n=e.size,r=e.theme;return{width:"small"===n?r.spaces.space4:r.spaces.space5,height:"small"===n?r.spaces.space4:r.spaces.space5,background:"online"===t?r.colors.success:r.colors.grayscale[500],border:"2px solid "+r.colors.surface,borderRadius:r.borderRadius.round,top:"-2px",right:"-2px"}}),";"),Ze=function(e){var t=e.avatarUrl,n=e.availability,i=e.size,a=void 0===i?"normal":i;return Object(r.d)(Je,null,Object(r.d)(f.b,{css:Qe,imgUrl:t,size:"small"===a?"24px":void 0}),n&&Object(r.d)(Xe,{availability:n,size:a}))},$e=n(49);var et={name:"f7ay7b",styles:"justify-content:center"},tt=Object(f.A)("div",{target:"e10kp68a1"})({name:"8xhv84",styles:"width:100%;display:flex"}),nt=Object(r.c)(et," flex:1;"),rt=Object(r.c)(et," min-width:auto;"),it=Object(f.A)("img",{target:"e10kp68a0"})({name:"1lnnphj",styles:"height:auto;max-height:50px"}),at=function(e){var t=e.agent,n=e.chatId,i=e.showAvatar,a=e.logoPath,o=e.isRatingEnabled,c="modern"===Object(d.g)().name;return Object(r.d)(tt,null,i&&t.avatar&&Object(r.d)(Ze,{avatarUrl:t.avatar,availability:"online"}),Object(r.d)(f.q,{flexFill:!0},Object(r.d)(f.f,{css:nt,flexFill:!0},Object(r.d)(f.w,{ellipsis:!0},Object(r.d)($e.a,null,t.name)),t.properties.jobTitle&&Object(r.d)(f.s,{ellipsis:!0},Object(r.d)($e.a,null,t.properties.jobTitle)),o&&c&&Object(r.d)(f.q,null,Object(r.d)(Ke,{chatId:n}))),o&&!c&&Object(r.d)(f.f,{css:et,noShrink:!0},Object(r.d)(f.q,null,Object(r.d)(Ke,{chatId:n}))),!!a&&Object(r.d)(f.f,{css:rt},Object(r.d)(it,{alt:"",src:a,draggable:!1}))))},ot=n(149),ct=n.n(ot),lt=n(213),st=n(148),ut=n(258),dt="top-bar";var mt={name:"l3iapi",styles:"margin-right:6px;margin-left:0"},ft=Object(f.A)(B.q,{target:"eyohww44"})("width:24px;height:24px;opacity:1;background-color:",(function(e){var t=e.theme;return"modern"===t.name?"transparent":t.colors.lighterOppositeAgentBarColor}),";",(function(e){return e.theme.isRtl&&mt}),";"),bt=Object(f.A)(B.f,{target:"eyohww43"})((function(e){return"up"===e.direction&&{transform:"rotate(180deg)"}})," transition:transform 0.3s ",(function(e){return e.theme.transitions.easings.swift}),";"),pt=Object(f.A)(Y,{target:"eyohww42"})("display:flex;text-align:left;overflow:hidden;height:auto;width:100%;align-items:",(function(e){return e.veritcallyCenter?"center":"flex-start"}),";transition:height 0.3s ",(function(e){return e.theme.transitions.easings.swift}),";will-change:height;line-height:1.5;a{color:inherit;}"),gt=Object(f.A)("div",{target:"eyohww41"})("height:",42,"px;display:flex;align-items:center;"),ht=Object(f.A)(ze,{target:"eyohww40"})("margin:",(function(e){return e.theme.isRtl?"4px 0 4px 15px":"4px 15px 4px 0"}),";background-color:",(function(e){return e.theme.colors.decorativeOppositeTitleBarColor}),";"),vt=function(e){var t=e.text,n=e.icon,a=e.isLoadingHistory,c=e.forceExpanded,l=e.forceCollapsed,s=e.isUploadDrawerVisible,u=i.useState(!0),d=u[0],m=u[1],f=i.useState(!1),b=f[0],p=f[1],g=i.useState(!1),h=g[0],v=g[1],j=i.useState(null),O=j[0],x=j[1],y=i.useState(!1),w=y[0],E=y[1],k=i.useRef(null),A=Object(J.l)(),S=i.useCallback((function(e){var t=(void 0===e?{}:e).shouldKeepPrevious,n=void 0!==t&&t;if(d){var r=k.current.clientHeight;r!==O&&x(r),k.current.style.height=r+"px",k.current.scrollTop}k.current.style.height=(d?42:Number(O))+"px",n&&p(d),m((function(e){return!e}))}),[d,O]),C=function(){d&&(k.current.style.height="auto")},T=a&&d,_=l&&d,I=b&&!l&&!d&&!s;return i.useEffect((function(){if(k&&!c){var e=k.current.clientHeight>42;v(e)}k&&c&&(k.current.style.height="auto",v(!1))}),[k,c]),i.useEffect((function(){h&&(x(k.current.clientHeight),k.current.style.height="42px",E(!0),m(!1))}),[h]),i.useEffect((function(){(T||_)&&S({shouldKeepPrevious:_})}),[S,T,_]),i.useEffect((function(){I&&(p(!1),S())}),[S,I]),Object(r.d)(o.a,null,(function(e){return Object(r.d)(pt,{ref:k,row:!0,veritcallyCenter:!h,onTransitionEnd:C,textWrap:!0},Object(r.d)(gt,{"aria-hidden":!0},Object(r.d)(ht,{size:"24px",isLight:!0},n)),Object(r.d)("div",{css:!d&&h?Object(ut.a)(2):"",id:A},Object(r.d)(ct.a,{component:st.a},Object(r.d)(lt.a,{template:t,limit:d?void 0:120,root:{component:$e.a}}))),h&&Object(r.d)(gt,null,Object(r.d)(ft,{onPress:S,"aria-expanded":d,"aria-controls":A,"aria-label":e(d?"show_less":"show_more")},Object(r.d)(bt,{size:24,direction:w&&d?"up":"down","aria-hidden":!0}))))}))},jt=n(29),Ot={modern:42,smooth:56},xt=Object(f.A)("div",{target:"e8t2lg23"})("width:",(function(e){return e.isVisible?100:0}),"%;height:",(function(e){return e.isVisible?100:0}),"%;position:absolute;top:0;left:0;z-index:101;"),yt=Object(f.A)("div",{target:"e8t2lg22"})("position:relative;top:",(function(e){return e.topOffset}),"px;left:0;width:100%;height:",(function(e){return"calc(100% - "+e.topOffset+"px)"}),";background-color:",(function(e){var t=e.theme;return Object(jt.f)(t.colors.surface,.93)}),";padding:",(function(e){return e.theme.spaces.space3}),";pointer-events:none;"),wt=Object(f.A)("div",{target:"e8t2lg21"})("display:flex;flex-direction:column;align-items:center;justify-content:center;width:100%;height:100%;border:2px dashed ",(function(e){return e.theme.colors.border}),";border-radius:",(function(e){return e.theme.borderRadius.lg}),";color:",(function(e){return e.theme.colors.primaryTextColor}),";"),Et=Object(f.A)("h1",{target:"e8t2lg20"})((function(e){return e.theme.typography.subheading}),";"),kt=Object(o.c)((function(e){return{uploadFile:function(t){return Object(v.e)(e,t,"drag")},hideDropArea:function(){return e.setApplicationState({dropAreaVisible:!1})},isVisible:e.getApplicationState("dropAreaVisible")}}))((function(e){var t=e.isVisible,n=e.uploadFile,r=e.hideDropArea,a=e.topBarHeight,c=i.useState(!1),l=c[0],s=c[1],u=Object(d.g)(),m=Ot[u.name]+a,f=function(e){e.preventDefault(),e.stopPropagation()};return i.createElement(ne,null,i.createElement(xt,{onDragLeave:function(){r()},onDragOver:f,onDrop:function(e){var t;f(e);var i=null==(t=e.dataTransfer)?void 0:t.files;i&&Array.prototype.forEach.call(i,n),r()},isVisible:t||l},i.createElement(b.a,{appear:!0,component:null},t&&i.createElement(j.d,{length:300,onEnter:function(){return s(!0)},onExited:function(){return s(!1)}},i.createElement(yt,{topOffset:m},i.createElement(wt,null,i.createElement(B.j,null),i.createElement(o.a,null,(function(e){return i.createElement(Et,null,e("drop_files_here"))}))))))))}));function At(){var e=Object(x.a)(["\n\t&-enter,\n\t&-appear {\n\t\ttransform: translateY(-100%);\n\t}\n\n\t&-enter-active,\n\t&-appear-active,\n\t&-enter-done,\n\t&-appear-done {\n\t\ttransform: translateY(0);\n\t\ttransition: transform ","ms ",";\n\t}\n\n\t&-exit {\n\t\ttransform: translateY(0);\n\t}\n\n\t&-exit-active {\n\t\ttransform: translateY(-100%);\n\t\ttransition: transform ","ms ",";\n\t}\n"]);return At=function(){return e},e}var St=Object(f.A)(f.a,{target:"eraual4"})("position:relative;box-shadow:",(function(e){return e.theme.boxShadow.sm}),";"),Ct=Object(f.A)("div",{displayName:"TopBar",target:"eraual3"})("position:relative;height:auto;bottom:0;z-index:",(function(e){return e.elevate?102:1}),";pointer-events:",(function(e){return e.elevate?"none":"all"}),";@media (max-height: 330px){display:none;}"),Tt=Object(f.A)("div",{target:"eraual2"})("min-height:calc(",42,"px + 2 * ",(function(e){return e.theme.AgentBar.css.padding}),");"),_t={name:"1pc9iid",styles:"position:relative;box-shadow:none;padding:0"},It=Object(f.A)(f.a,{target:"eraual1"})("position:absolute;top:0;left:0;width:100%;box-shadow:",(function(e){return e.theme.boxShadow.sm}),";",(function(e){return e.collapsed&&_t}),";"),Rt=Object(f.A)("div",{target:"eraual0"})("position:relative;width:100%;z-index:",(function(e){var t=e.collapsed;return e.elevate?102:t?2:1}),";pointer-events:",(function(e){return e.elevate?"none":"all"}),";"),zt="cubic-bezier(0.14, 0, 0, 1)",Mt={enter:150,exit:150},Ft=function(e){return e(At(),150,zt,150,zt)},Ht={name:"kul0w8",styles:"transition:opacity 100ms ease-in-out;position:relative"},Pt=Object(o.c)((function(e,t){var n=t.chatId;return function(e){var t,r=e.getView("Chat/queue"),i=Object(s.kb)(e),a=Object(s.nb)(e),o=Object(s.ob)(e),c=Object(s.h)("logo",e),l=c.enabled&&"modern"===Object(s.w)(e);return{agent:Object(s.d)(n,e),chatActive:e.getChat(n).active,showAvatar:Object(s.h)("agentAvatar",e).enabled,isRatingEnabled:Object(s.h)("rating",e).enabled,logoPath:l?(t=c.path,"https://"+Object(V.m)(t)):null,showAgentBar:i,showOfflineInformation:a,showQueueInformation:o,offlineInformation:e.localize(e.getApplicationState("limitReached")||!Object(s.L)(e)?"agents_not_available":"agents_not_available_continuous"),queueTemplate:Object(s.r)(e),numberInQueue:r&&r.numberInQueue,waitingTime:r&&r.waitingTime,showTopBar:Object(s.db)(e),hasNoVisibleEvents:Object(s.G)(e),isDropAreaVisible:e.getApplicationState("dropAreaVisible"),isUploadingFiles:!!Object(s.p)(e).length}}}))((function(e){var t=e.agent,n=e.chatId,a=e.showAvatar,o=e.isRatingEnabled,l=e.logoPath,s=e.showAgentBar,u=e.scrollingDeltaSource,p=e.isOnBottomSource,g=e.showOfflineInformation,h=e.offlineInformation,v=e.showQueueInformation,j=e.queueTemplate,O=e.numberInQueue,x=e.waitingTime,w=e.showTopBar,E=e.isLoadingHistory,k=e.children,A=e.hasNoVisibleEvents,S=e.isDropAreaVisible,C=e.isUploadingFiles,T=i.useRef(),_=i.useRef(),I=i.useRef(0),R=i.useRef(),z=i.useState(!0),M=z[0],F=z[1],H="modern"===Object(d.g)().name,P=i.useCallback((function(){F(!0),T.current&&(T.current.style.bottom=0,T.current.style.height="auto"),_.current&&(_.current.style.opacity=1)}),[T]);Object(c.a)(u,(function(e){var t=e.y;s&&("auto"===T.current.style.height&&(I.current=T.current.offsetHeight),1===t&&F(!1),!M&&t<1&&F(!0),T.current&&(T.current.style.bottom=t*I.current+"px",T.current.style.height=I.current-t*I.current+"px"),_.current&&(_.current.style.opacity=1-2*t))}));return i.useEffect((function(){P()}),[w,P]),i.useEffect((function(){if(p)return p.subscribe((function(e){e&&P()}))}),[p,P]),i.useEffect((function(){T.current&&Object(m.wb)(T.current.querySelectorAll("button")).forEach((function(e){e.tabIndex=M?0:-1}))}),[M]),Object(r.d)("div",{ref:R},Object(r.d)(kt,{topBarHeight:M&&R.current?R.current.clientHeight:0}),Object(r.d)(Ct,{id:dt,ref:T,elevate:S},Object(r.d)(r.a,null,(function(e){var i=e.css;return Object(r.d)(b.a,{appear:!0,component:null,exit:M},s&&Object(r.d)(y.a,{timeout:Mt,classNames:Ft(i)},Object(r.d)("div",null,!H&&Object(r.d)(W,null),Object(r.d)(St,{noShrink:!0},Object(r.d)(f.q,{flexFill:!0,ref:_,css:Ht},Object(r.d)(at,{agent:t,chatId:n,showAvatar:a,logoPath:l,isRatingEnabled:o}))))))}))),Object(r.d)(Rt,{collapsed:!(v||g),elevate:S},(v||g)&&Object(r.d)(i.Fragment,null,!H&&Object(r.d)(W,null),Object(r.d)(Tt,null)),Object(r.d)(r.a,null,(function(e){var t=e.css;return Object(r.d)(b.a,{appear:v||g,component:null},Object(r.d)(y.a,{timeout:Mt,classNames:Ft(t)},Object(r.d)(It,{collapsed:!(v||g)},v&&Object(r.d)(vt,{text:j.replace(/%number%/g,"**"+O+"**").replace(/%minutes%/g,"**"+Math.floor(x/60)+"**"),icon:Object(r.d)(B.p,{size:24}),isLoadingHistory:E,forceExpanded:A,forceCollapsed:S,isUploadDrawerVisible:C}),g&&Object(r.d)(vt,{text:h,icon:Object(r.d)(B.s,null),isLoadingHistory:E,forceExpanded:A,forceCollapsed:S,isUploadDrawerVisible:C}),k)))}))))})),qt=n(261),Dt=n(170);var Bt=Object(f.A)(f.c,{target:"e1i3r8v0"})({name:"qhxz92",styles:"max-width:100%"}),Lt=function(e){var t=e.children;return i.createElement(f.i,{date:"",showMetaOnClick:!1,system:!0},i.createElement(Bt,null,i.createElement(Dt.a,{text:t})))},Nt=n(665),Ut=n(263);var Vt=Object(f.A)(Ut.a,{displayName:"SystemCard",target:"e1r9cm3y0"})({name:"13n6sif",styles:"padding:10px 20px;margin:0 18px 10px 18px;width:100%;max-width:345px;position:relative"}),Wt=Object(f.A)("div",{target:"e1q4zsg91"})("display:flex;flex-direction:row;position:absolute;top:-21px;left:0;right:0;color:",(function(e){return e.theme.colors.ctaText}),";"),Yt=Object(f.A)("div",{target:"e1q4zsg90"})("display:flex;justify-content:center;align-items:center;overflow:hidden;margin:0 auto;border-radius:",(function(e){return e.theme.borderRadius.round}),";width:",42,"px;height:",42,"px;background-color:",(function(e){var t=e.theme;return e.backgroundColor||t.colors.cta}),";"),Gt=function(e){var t=e.children,n=e.backgroundColor;return i.createElement(Wt,{"aria-hidden":!0},i.createElement(Yt,{backgroundColor:n},t))},Kt=function(e,t){return Object(r.c)("margin-",e?"right":"left",":4px;margin-top:3px;fill:currentColor;transform:","scaleY("+("up"===t?-1:1)+")",";")},Qt=function(e){var t=e.direction,n=void 0===t?"down":t,i=Object(O.a)(e,["direction"]),a=Object(d.g)().isRtl;return Object(r.d)("svg",Object(u.a)({viewBox:"0 0 7 4",width:"7px",height:"4px",css:Kt(a,n)},i),Object(r.d)("path",{d:"M1.1,0.2C0.9,0,0.5,0,0.4,0.2s-0.2,0.5,0,0.7l2.8,2.8c0.2,0.2,0.5,0.2,0.7,0l2.8-2.8c0.2-0.2,0.2-0.5,0-0.7S6.2,0,6,0.2 L3.5,2.7L1.1,0.2z"}))},Jt=n(24),Xt=Object(f.A)("button",{target:"eentevd0"})("display:flex;flex-direction:row;align-items:center;justify-content:center;width:100%;background:none;border:none;margin-top:8px;font-size:12px;text-align:center;cursor:pointer;color:",(function(e){return function(e){return"light"===e.variant?Object(Jt.i)(e.colors.cta)?Object(jt.g)(.6,e.colors.cta):e.colors.cta:Object(jt.d)(.2,e.colors.cta)}(e.theme)}),";"),Zt=Object(f.A)("div",{target:"e1g195pu0"})("position:absolute;top:50%;bottom:0;left:0;right:0;pointer-events:none;background:",(function(e){return"light"===e.theme.variant?"linear-gradient(rgba(255, 255, 255, 0), rgba(255, 255, 255, 0.9))":"linear-gradient(rgba(37, 37, 37, 0), rgba(37, 37, 37, 0.9))"}),";"),$t=Object(f.A)("div",{target:"e9s6ynt0"})("position:relative;overflow:hidden;height:auto;transition:max-height 300ms ",(function(e){return e.theme.transitions.easings.swift}),";");var en=Object(f.A)("div",{target:"e1cdxu9o0"})({name:"11w4ikw",styles:"height:auto;padding:8px"}),tn=Object(f.A)("div",{target:"ec3vyki0"})("display:flex;justify-content:center;",(function(e){var t;return e.showIcon&&(t="21px",Object(r.c)("padding-top:",t,";"))}),";"),nn=Object(o.c)((function(e,t){var n=t.icon,r=e.getApplicationState("config").theme;return{showIcon:!!n&&"modern"!==r.name,rtl:e.getApplicationState("rtl"),localize:e.localize}}))((function(e){var t,n=e.icon,a=e.showIcon,o=e.children,l=e.collapsible,s=void 0!==l&&l,d=e.defaultCollapsed,f=void 0!==d&&d,b=e.collapsedHeight,p=void 0===b?100:b,g=e.collapseThreshold,v=void 0===g?20:g,j=e.rtl,O=e.localize,x=e.dataTestId,y=(void 0===x&&h.a,i.useRef(0)),w=i.useRef(!1),E=i.useRef(null),k=i.useRef(null),A=Object(re.f)(),S=Object(re.f)(),C=i.useState(!1),T=C[0],_=C[1],I=i.useState(s),R=I[0],z=I[1],M=Object(c.d)(m.w),F=Object(c.d)((function(){return s&&f?(e=p+"px",Object(r.c)("max-height:",e,";")):null;var e})),H=i.useCallback((function(e){k.current.style.maxHeight="number"===typeof e?e+"px":e}),[]),P=i.useCallback((function(){_(!T)}),[T]),q=i.useCallback((function(){T||H("none")}),[T,H]);return i.useEffect((function(){return function(){return cancelAnimationFrame(y.current)}}),[]),i.useEffect((function(){var e=E.current.offsetHeight,t=e>p&&e-p>v;z(t&&s),!w.current&&s&&_(t&&f),w.current=s}),[s,f,p,v]),i.useEffect((function(){R?(H(E.current.offsetHeight),T&&(cancelAnimationFrame(y.current),y.current=requestAnimationFrame((function(){return H(p)})))):H("none")}),[R,T,p,H]),Object(r.d)(tn,{showIcon:a,role:"row"},Object(r.d)(Vt,Object(u.a)({rtl:j,role:"gridcell"},A),a?n:null,Object(r.d)($t,{id:M,"aria-hidden":T,ref:k,onTransitionEnd:q,css:[a&&(t="12px",Object(r.c)("margin-top:",t,";")),F,""]},Object(r.d)(en,{ref:E},o),T&&Object(r.d)(Zt,null)),R&&Object(r.d)(Xt,Object(u.a)({onClick:P,"aria-controls":M,"aria-expanded":!T},S),Object(r.d)("span",null,O(T?"show_more":"show_less")),Object(r.d)(Qt,{direction:T?"down":"up","aria-hidden":!0}))))})),rn=n(650),an=n(64),on=n(19),cn=n(33),ln=n(51),sn=n(265),un=[].concat(Object.values(l.a),[l.m,"https://customer-mobile-app.ngrok.io/chat-widget-moment/"]),dn=function(e){var t=Object(sn.a)(e);return un.some((function(e){return 0===t.lastIndexOf(e,0)}))},mn=function(e,t){var n=e.getView("Moment");return{available:Object(s.B)(e),disabled:n.show&&!dn(n.data.url),showMoment:function(){var n=Object(V.a)({source:t,"moment-title":l.i}),r=l.a.production+"?"+n;Object(v.I)(e,{url:r})}}};var fn=Object(f.A)("label",{target:"e1fikopb9"})("display:block;padding-bottom:",(function(e){return e.single?"0px":"12px"}),";color:",(function(e){return e.theme.colors.primaryTextColor}),";",(function(e){return e.theme.typography.basic}),";"),bn=Object(f.A)(an.t,{target:"e1fikopb8"})({name:"haah45",styles:"margin:0;padding:0;display:flex;width:40px;cursor:pointer;border:1px solid;align-items:center;justify-content:center"}),pn=Object(f.A)(bn,{target:"e1fikopb7"})("border-radius:",(function(e){return e.theme.borderRadius.none}),";",(function(e){var t,n=e.theme.isRtl?"Left":"Right";return Object(r.c)(((t={})["borderTop"+n+"Radius"]=6,t["borderBottom"+n+"Radius"]=6,t),"")})," color:",(function(e){var t=e.theme;return e.disabled?t.colors.disabledContrast:t.colors.ctaText}),";border:1px solid ",(function(e){var t=e.theme;return e.disabled?t.colors.secondaryTextColor:t.colors.cta}),";background-color:",(function(e){var t=e.theme;return e.disabled?t.colors.disabled:t.colors.cta}),";"),gn=Object(f.A)(bn,{target:"e1fikopb6"})("color:",(function(e){return e.theme.colors.primaryTextColor}),";border:none;background-color:transparent;"),hn=Object(f.A)("span",{target:"e1fikopb5"})("width:100%;align-items:center;padding:8px;margin:1px;color:",(function(e){return e.theme.colors.primaryTextColor}),";",(function(e){return e.theme.typography.input})," ",(function(e){var t=e.active,n=e.theme;return t&&Object(r.c)("color:","dark"===n.variant?Object(jt.d)(.2,n.colors.cta):n.colors.cta,";")}),";"),vn=Object(f.A)("form",{target:"e1fikopb4"})({name:"nj1ofm",styles:"display:flex;position:relative;flex-direction:row"}),jn=Object(f.A)("div",{target:"e1fikopb3"})("display:flex;justify-content:center;align-items:center;height:100%;position:absolute;padding:0 6px;color:",(function(e){return e.theme.colors.primaryTextColor}),";",(function(e){var t;return(t={})[e.theme.isRtl?"right":"left"]=0,t}),";"),On=Object(f.A)("div",{target:"e1fikopb2"})("border-top:1px solid ",(function(e){return e.theme.colors.divider}),";margin:",(function(e){var t=e.theme;return t.spaces.space6+" "+t.spaces.space0}),";"),xn=Object(f.A)("div",{target:"e1fikopb1"})({name:"192s9p1",styles:"display:flex;flex-direction:row;justify-content:center;align-items:center"}),yn=function(e){var t,n=e?"Left":"Right",i=e?"Right":"Left";return Object(r.c)(((t={margin:0,minWidth:0})["padding"+i]=34,t["border"+n]="none",t["borderTop"+n+"Radius"]=0,t["borderBottom"+n+"Radius"]=0,t),"")},wn=Object(o.c)((function(e,t){var n=t.event,r=t.chatId,i=function(t){return Object(v.S)(e,{email:t}),new Promise((function(t){return e.once("customer_updated",t)}))};return function(t){var a=t.getSessionUser().email,o=t.getApplicationState(),c=o.rtl,l=o.license,s=t.getChat(r),u=s.properties,d=s.serverId,m=mn(t,"ask-for-email");if("ask_for_email"!==n.properties.formId)return{rtl:c,email:a,chatTransfer:m,license:l,serverChatId:d,submitEmail:function(e){return Object(cn.d)("ask_for_email_form_submitted",{reason:"agent_offline"}),i(e)},message:t.localize("email_prompt_first_time"),confirmation:t.localize("email_prompt_confirmation"),active:n.thread===u.lastThread,currentAgent:u.currentAgent};var f=n.properties.fields.find((function(e){return"information"===e.type})),b=t.getEvents(r).find((function(e){return e.id!==n.id&&e.thread===n.thread&&e.properties.formId===n.properties.formId}));if(b)return{rtl:c,chatTransfer:m,license:l,serverChatId:d,message:"",active:!1,email:b.properties.fields[0].answer,confirmation:f.label,currentAgent:u.currentAgent};var p=n.properties.fields.find((function(e){return"email"===e.type}));return p?{rtl:c,email:a,chatTransfer:m,license:l,serverChatId:d,active:!0,alwaysShowInput:!0,message:p.label,submitEmail:function(t){return Object(cn.d)("ask_for_email_form_submitted",{reason:"agent_inactivity_timeout"}),function(t){return Promise.all([i(t),e.requestUpdateEvent(r,n.id,{properties:{answers:{email:t}}})])}(t)},confirmation:f.label,hidden:n.thread!==u.lastThread,currentAgent:u.currentAgent}:{rtl:c,chatTransfer:m,license:l,serverChatId:d,email:"",active:!1,confirmation:"",message:f.label,currentAgent:u.currentAgent}}}))((function(e){var t=e.rtl,n=e.email,a=e.active,o=e.hidden,l=e.message,s=e.confirmation,d=e.alwaysShowInput,m=e.chatTransfer,f=e.submitEmail,b=(e.license,e.serverChatId,e.currentAgent),p=Object($.useFrame)(),g=i.useRef(null),h=i.useRef(null),v=i.useState(!n),j=v[0],O=v[1],x=i.useState(n||""),y=x[0],w=x[1],E=n&&!d?s:l,k=Object(Nt.a)({type:"email",autoComplete:"email",placeholder:"Email",value:y,onChange:w,label:E},h),A=k.inputProps,S=k.labelProps,C=i.useCallback((function(){O(!0),w(n||"")}),[n]),T=i.useCallback((function(){n&&O(!1)}),[n]);if(Object(c.n)(g,T,p),o)return null;if(l&&!s&&!n)return Object(r.d)(nn,null,Object(r.d)(fn,{single:!0},Object(r.d)(lt.a,{preserveLists:!0,template:l,root:{component:$e.a}})));var _=d||(!n||a&&j),I=!y;Object(on.g)();return Object(r.d)(nn,null,Object(r.d)(fn,_&&S,Object(r.d)(ct.a,{component:st.a},Object(r.d)(lt.a,{preserveLists:!0,template:E,root:{component:$e.a}}))),Object(r.d)(vn,{ref:g,onSubmit:function(e){e.preventDefault(),function(){if(b||n!==y)return f(y).then((function(){O(!1)}));O(!1)}()}},_?Object(r.d)(i.Fragment,null,Object(r.d)(rn.a,Object(u.a)({},A,{css:yn(t)})),Object(r.d)(jn,null,Object(r.d)(an.z,{"aria-hidden":!0})),Object(r.d)(pn,{type:"submit",active:_,disabled:I,"aria-label":"Submit an email"},Object(r.d)(an.a,{"aria-hidden":!0}))):Object(r.d)(i.Fragment,null,Object(r.d)(hn,{ellipsis:!0,active:a},n),a&&Object(r.d)(gn,{onPress:C,"aria-label":"Edit an email"},Object(r.d)(an.l,{"aria-hidden":!0})))),m.available&&Object(r.d)(i.Fragment,null,Object(r.d)(On,null),Object(r.d)(fn,null,"Prefer mobile notifications?"),Object(r.d)(ln.a,{variant:"default","aria-label":"Download app",disabled:m.disabled,onPress:function(){Object(cn.d)("chat_app_button_clicked",{ui_source:"ask_for_email"}),m.showMoment()},label:Object(r.d)(xn,null,Object(r.d)(an.B,{"aria-hidden":!0}),Object(r.d)("span",null,"Get reply via mobile app"))})),!1)}));n(651);var En=Object(f.A)("div",{target:"efus62t2"})({name:"17pqesx",styles:"margin-bottom:8px;a{color:inherit;}"}),kn=Object(f.A)("div",{target:"efus62t1"})("width:100%;margin-bottom:2px;font-size:14px;color:",(function(e){return e.theme.colors.secondaryTextColor}),";"),An=Object(f.A)("div",{target:"efus62t0"})("width:100%;font-size:14px;color:",(function(e){return e.theme.colors.primaryTextColor}),";"),Sn=function(e){var t=e.fields;return i.createElement("div",null,t.map((function(e,t){var n=e.label,r=e.answer;return i.createElement(En,{key:t},i.createElement(kn,{textWrap:!0},i.createElement(ct.a,{component:st.a},i.createElement(lt.a,{preserveLists:!0,template:n,root:{component:$e.a}}))),i.createElement(An,{textWrap:!0},i.createElement($e.a,null,"string"===typeof r?r:r.join(", "))))})))},Cn=n(35),Tn=function(e){function t(){return e.apply(this,arguments)||this}Object(Cn.a)(t,e);var n=t.prototype;return n.componentWillUnmount=function(){var e=this.props,t=e.form,n=e.name,r=t.getFieldState(n);r&&r.value&&t.change(n,void 0)},n.render=function(){return this.props.children},t}(i.Component);var _n=function(e){var t=e.when,n=e.children;return t?i.createElement(xe.c,{subscription:ke.d},(function(n){var r=n.form;return n.values[t]?i.createElement(Tn,Object(u.a)({},e,{form:r})):null})):i.createElement(i.Fragment,null,n)},In=(n(646),n(652),n(657),Object(f.A)("p",{target:"ecj3oet0"})("margin:0;color:",(function(e){return e.theme.colors.primaryTextColor}),";a{color:inherit;}",(function(e){return e.theme.typography.basic}),";")),Rn=function(e){var t=e.children;return i.createElement(In,null,"string"===typeof t?i.createElement(ct.a,{component:st.a},i.createElement(lt.a,{template:t,root:{component:$e.a}})):t)},zn=n(653),Mn=n(668),Fn={information:Mn.c,text:Mn.h,textarea:Mn.i,email:Mn.b,rating:Mn.f,radio:Mn.e,checkbox:Mn.a,select:Mn.g};var Hn=function(e){var t=e.type;return Fn[t]},Pn=function(e,t){switch(t){case"prechat":return e("prechat_submit_label");case"ticket":return e("offline_form_submit_label");default:return e("submit")}},qn=Object(o.c)((function(e,t){var n=t.chatId,r=t.eventId,i=t.type,a=function(t){if("prechat"===i||"ticket"===i){var a=t.name,o=t.email,c=Object(m.f)({name:a,email:o});Object(m.G)(c)||e.updateUser(e.getSessionUserId(),c)}return e.requestUpdateEvent(n,r,{properties:{answers:t}})};return function(e){return{localize:e.localize,mobile:e.getApplicationState("mobile"),sendForm:a,sessionUser:e.getSessionUser()}}}))((function(e){var t=e.id,n=e.type,r=e.fields,a=e.mobile,o=e.localize,l=e.sendForm,s=e.sessionUser,d=Object(c.i)(t+":"+n),b=Object(c.d)((function(){var e=d.get(),t=function(e,t){var n=Object(m.Q)((function(e){return"string"===typeof e?Object(m.Ab)(e):e}),Object(m.db)(["email","name"],e)),r=n.name,i=n.email;return r===t("client")?{email:i}:{email:i,name:r}}(s,o);return Object(ke.f)(r,t,e)})),p=i.useRef({counter:0,lastValues:null,lastResult:null}),g=i.useCallback((function(e){p.current.counter++,p.current.lastValues=Object(u.a)({},e);var t=r.reduce((function(t,n){var r,i,a=n.required,c=n.name;return a&&!Object(ke.i)(e[c])?Object(u.a)({},t,((r={})[c]=o("survey_fill_in_required_fields"),r)):"maxLength"in n&&"number"===typeof n.maxLength&&e[c]&&e[c].length>n.maxLength?Object(u.a)({},t,((i={})[c]="Cannot be longer than "+n.maxLength+" characters long.",i)):t}),{});return p.current.lastResult=Object(u.a)({},t),t}),[r,o]);return i.createElement(Te,{id:t,mobile:a,initialValues:b,validate:g,onSubmit:function(e){var t=p.current,n=t.counter,r=t.lastValues,i=t.lastResult,a=g(e);return 0!==Object.keys(a).length&&Object(cn.c)("invalid_form_submit_4",null,Object(m.Q)((function(e){return JSON.stringify(e)}),{validationErrors:a,validationCounter:n,lastValidationValues:r,lastValidationResult:i,values:e})),l(e).then((function(){d.destroy()}),(function(e){var t;return e||((t={})[zn.a]=o("lost_connection"),t)}))},submitLabel:Pn(o,n)},r.map((function(e,t){var n=Hn(e);return i.createElement(f.q,{key:t},i.createElement(_n,{name:e.name,when:e.dependOn},i.createElement(n,Object(u.a)({},e,{localize:o}))))})),i.createElement(xe.c,{onChange:function(e){var t=e.values;e.dirty&&d.set(t)},subscription:{values:!0,dirty:!0}}))})),Dn=function(){var e=Object(d.g)();return i.createElement(Gt,{backgroundColor:e.colors.cta},i.createElement(B.C,{color:e.colors.ctaText}))},Bn=function(){var e=Object(d.g)();return i.createElement(Gt,{backgroundColor:e.colors.cta},i.createElement(B.L,{color:e.colors.ctaText}))},Ln=function(e){var t=e.answered,n=Object(d.g)();return i.createElement(Gt,{backgroundColor:t?n.colors.success:n.colors.cta},t?i.createElement(B.O,{color:n.colors.successContrast}):i.createElement(B.v,{color:n.colors.ctaText}))},Nn=function(e){var t=e.localize;return i.createElement(Rn,null,t("offline_message_sent"))},Un=function(e){var t=e.chatId,n=e.id,r=e.setScrollTargetNode,a=e.form,l=Object(O.a)(e,["chatId","id","setScrollTargetNode","form"]),d=a.properties,m=d.formId,f=d.formType,b=d.fields,p=d.answered,g=b.filter((function(e){return e.answer&&e.label})),h=s.Q(a),v=i.useRef(null);if(Object(c.o)((function(){!p&&v.current&&r&&r(v.current)})),h)return null;var j=function(e){switch(e){case"prechat":return Dn;case"postchat":return Bn;case"ticket":return Ln;default:return null}}(f),x=function(e){return"ticket"===e?Nn:Sn}(f);return i.createElement("div",Object(u.a)({ref:v},l),i.createElement(o.a,null,(function(e){return i.createElement(nn,{defaultCollapsed:!0,collapsible:p,icon:j&&i.createElement(j,{answered:p})},p?i.createElement(x,{fields:g,localize:e}):i.createElement(qn,{key:f,chatId:t,eventId:n,id:m,type:f,fields:b}))})))};var Vn={name:"w1atjl",styles:"width:100%;height:100%"},Wn=Object(f.A)("div",{target:"eprpde50"})("flex-shrink:0;width:24px;height:24px;border-radius:",(function(e){return e.theme.borderRadius.md}),";overflow:hidden;"),Yn=function(){return Object(r.d)(an.v,null,Object(r.d)(an.G,null))},Gn=function(e){var t=e.src;return t?Object(r.d)(Wn,null,Object(r.d)(f.h,{src:t,css:Vn},(function(e){switch(e.imageStatus){case"pending":return Object(r.d)(an.v,null);case"failed":return Object(r.d)(Yn,null);default:return null}}))):Object(r.d)(Wn,null,Object(r.d)(Yn,null))};var Kn=Object(f.A)("h2",{target:"e5gms8x0"})({name:"k9orpe",styles:"flex-grow:1;flex-basis:100%;font-weight:700;font-size:14px;margin:0 8px"}),Qn=Object(f.A)(f.q,{target:"e1txcupw0"})("border-bottom:1px solid ",(function(e){return e.theme.colors.divider}),";padding:0 0.8em;height:48px;display:flex;align-items:center;");var Jn=Object(f.A)("form",{target:"ewg5kgh2"})({name:"4bgdod",styles:"display:block;position:relative"}),Xn=Object(f.A)(rn.a,{target:"ewg5kgh1"})({name:"1syokg1",styles:"height:50px;padding-right:calc(36px + (2 * 8px))"}),Zn=Object(f.A)(B.q,{target:"ewg5kgh0"})("width:36px;height:36px;position:absolute;right:8px;top:calc(50% - 18px);display:flex;justify-content:center;align-items:center;transition:background-color 100ms ease-in-out;",(function(e){var t=e.disabled,n=e.theme;return t?{backgroundColor:"transparent",color:n.colors.tertiaryTextColor}:{backgroundColor:Object(Jt.i)(n.colors.cta)?Object(jt.g)(.6,n.colors.cta):n.colors.cta,color:n.colors.ctaText}}),";"),$n=function(e){var t=e.label,n=e.titleId,r=e.descriptionId,a=e.onSubmit,o=e.disabled,c=i.useState(""),l=c[0],s=c[1],u=""===l||o,d=function(){u||a(l)};return i.createElement(Jn,{onSubmit:function(e){e.preventDefault(),d()}},i.createElement(Xn,{type:"text",placeholder:t,disabled:o,value:l,"aria-labelledby":n,"aria-describedby":r,onChange:function(e){return s(null==e?void 0:e.target.value)}}),i.createElement(Zn,{disabled:u,"aria-label":t,onPress:d},i.createElement(B.H,{size:32})))};var er=Object(f.A)(Qn,{target:"e1j7xo754"})({name:"w8lbxe",styles:"border-bottom:0"}),tr=Object(f.A)("div",{displayName:"BoosterContainer",target:"e1j7xo753"})("width:100%;display:flex;color:",(function(e){return e.theme.colors.primaryTextColor}),";max-width:",(function(e){return e.single?"270px":"240px"}),";"),nr=Object(f.A)("div",{target:"e1j7xo752"})({name:"gkg51",styles:"padding:0 0.8em 0.8em 0.8em"}),rr=Object(f.A)(Ut.a,{target:"e1j7xo751"})({name:"1j46qqh",styles:"flex-grow:1;max-width:100%;flex-basis:100%"}),ir=Object(f.A)("p",{target:"e1j7xo750"})(Object(ut.a)(),";margin:0;margin-bottom:1.2em;",(function(e){return e.theme.typography.basic}),";"),ar=function(e){var t=e.id,n=e.icon,r=e.title,a=e.description,o=e.onUserAction,c=e.action,l=e.disabled,s=e.single,u=void 0!==s&&s,d=Object(J.l)(),m=Object(J.l)();return i.createElement(tr,{single:u},i.createElement(rr,{role:"gridcell"},i.createElement(er,null,i.createElement(Gn,{src:n}),i.createElement(Kn,{id:d,ellipsis:!0,flexFill:!0},r)),i.createElement(nr,null,i.createElement(ir,{id:m},i.createElement(ct.a,{component:st.a},i.createElement(lt.a,{preserveLists:!0,template:a,root:{component:$e.a}}))),"button"===c.type&&i.createElement(ln.a,{ellipsis:!0,variant:"default",label:c.label,onPress:function(){return o(t)},disabled:l}),"search"===c.type&&i.createElement($n,{titleId:d,label:c.label,descriptionId:m,onSubmit:function(e){return o(t,e)},disabled:l}))))};var or=Object(f.A)("div",{target:"e1ndqyd80"})({name:"cmvgoq",styles:"padding-top:0.8em;width:100%;display:flex;justify-content:center;flex-grow:1"}),cr=Object(o.c)((function(e){var t=function(t){return e.emit("on_chat_booster_launched",t)},n=function(t){return e.emit("open_in_new_tab",t)};return function(e){return{emitBoosterLaunched:t,openInNewTab:n,currentMoment:e.getView("Moment")}}}))((function(e){var t=e.boosters,n=e.setScrollTargetNode,r=e.showMoment,a=e.emitBoosterLaunched,o=e.currentMoment,l=e.openInNewTab,s=i.useRef(null);Object(c.o)((function(){s.current&&n&&n(s.current)}));var d=function(e){var t,n=e.id;return o.show&&(null==(t=o.data)?void 0:t.boosterId)!==n},m=function(e,n){var i=t.find((function(t){return t.id===e}));if(i){var o=i.icon,c=i.title,s=i.action,d=s.url,m=s.type,f=s.webviewHeight,b=void 0===f?"full":f;a({id:e,title:c}),"support_ua"!==e?r({icon:o,title:c,boosterId:e,height:b,source:"chat_booster",url:Object(V.d)(d,Object(u.a)({},c&&{"moment-title":c},"search"===m&&n&&{query:String(n)}))}):l(d)}};return i.createElement(or,{ref:s,role:"row"},1===t.length?i.createElement(ar,Object(u.a)({},t[0],{single:!0,onUserAction:m,disabled:d(t[0])})):i.createElement(f.e,null,t.map((function(e){return i.createElement(ar,Object(u.a)({},e,{key:e.id,onUserAction:m,disabled:d(e)}))}))))}));var lr=Object(f.A)("div",{target:"e1yucjc71"})({name:"12etndg",styles:"width:100%;display:flex;margin-bottom:16px;flex-direction:row;align-items:center;justify-content:center"}),sr=Object(f.A)("div",{target:"e1yucjc70"})("padding:4px 12px;",(function(e){var t=e.theme;return Object(r.c)(t.typography.basic,";color:",t.colors.subtleFeedbackContrast,";background-color:",t.colors.subtleFeedback,";border-radius:",t.borderRadius.sm,";")}),";"),ur=function(){return i.createElement(o.a,null,(function(e){return i.createElement(lr,null,i.createElement(sr,null,e("fill_form_to_send")))}))},dr=n(661),mr=Object(f.A)("span",{target:"e1v5q6v41"})("margin:",(function(e){return e.theme.spaces.space1}),";width:1.5em;height:1.5em;text-align:center;vertical-align:middle;font-size:1.5em;line-height:1.5em;"),fr=Object(f.A)("div",{target:"e1v5q6v40"})("margin:",(function(e){return e.theme.spaces.space2}),";padding:0;outline:none;cursor:pointer;appearance:none;background:none;border:none;",(function(e){var t=e.highlighted,n=e.isSelected,i=e.theme,a="transparent";return t?a=i.colors.cta:n&&(a=i.colors.pressedElement),Object(r.c)(B.r,"{background-color:",a,";}")}),";"),br=function(e){var t=e.onPress,n=e.isSelected,r=e.emoji,a=e.itemList,o=e.actionLabel,c=void 0===o?"insert":o,l=i.useRef(null),s=a.useItem,u=a.clearHighlightedItem,d=s({ref:l,text:r,value:r}),m=d.id,f=d.highlight,b=(0,d.useHighlighted)();return i.createElement(fr,{id:m,ref:l,highlighted:b,isSelected:n,onClick:t,onMouseOver:f,onMouseOut:u,"aria-label":c+" "+r},i.createElement(B.r,null,i.createElement(mr,{"aria-hidden":!0},r)))};function pr(){var e=Object(x.a)(["\n\t0% {\n\t\tscale: 1;\n\t}\n\t50% {\n\t\tscale: ",";\n\t}\n\t100% {\n\t\tscale: 1;\n\t}\n"]);return pr=function(){return e},e}var gr={name:"1r7pukz",styles:"font-size:1rem;width:25px;height:25px"},hr=function(e){return void 0===e&&(e=2),Object(r.e)(pr(),e)};var vr={name:"dgw6hz",styles:"left:-16px;bottom:-10px"},jr={name:"1qhj2dg",styles:"left:4px;bottom:50%"},Or=Object(f.A)(B.q,{target:"e83qc9n0"})((function(e){var t=e.isVisible,n=e.isAnimating,i=e.messageHeight,a=e.theme,o=e.isBottom;return Object(r.c)(gr,";box-shadow:",a.boxShadow.xs,";background-color:",function(e){var t=e.isVisible,n=e.theme;return t?"light"===n.variant?Object(jt.h)(.95,n.colors.cta):Object(jt.e)(.2,n.colors.cta,n.colors.grayscale[900]):n.colors.surface}({isVisible:t,theme:a}),";border-radius:",a.borderRadius.md,";transform:",function(e){var t=e.isVisible,n=e.isBottom,r=e.isModern,i=e.messageHeight;return t?"translateY("+(r?"50%":"0")+")":n?"translateY("+(r?8:16)+"px) scale(1.3)":"translateY(-"+(i+8)+"px) scale(2.5)"}({isVisible:t,isBottom:o,isModern:"modern"===a.name,messageHeight:i}),";transition:opacity 0.2s ",a.transitions.easings.swift,",transform 0.4s ",a.transitions.easings.swift,",background-color 0.4s ",a.transitions.easings.swift,";will-change:transform,opacity,background-color;position:absolute;display:",t?"block":"none",";","modern"===a.name?jr:vr," ",n&&Object(r.c)("&:first-child{animation:",hr(1.8)," ",a.transitions.easings.spring," 1s;}"),";")}),";");var xr={name:"1rvwycs",styles:"bottom:-10px"},yr={name:"1hpnkv2",styles:"left:4px;bottom:50%;transform:translateY(50%)"},wr=Object(f.A)("div",{target:"e7wqyqi0"})(gr," position:absolute;border-radius:",(function(e){return e.theme.borderRadius.round}),";box-shadow:",(function(e){return e.theme.boxShadow.xs}),";display:flex;align-items:center;justify-content:center;",(function(e){var t=e.isOwn,n=e.isHidden,i=e.isAnimating,a=e.messageHeight,o=e.theme;return t?function(e){var t=e.isHidden,n=e.isAnimating,i=e.messageHeight,a=e.theme;return Object(r.c)("right:-12px;background-color:",a.colors.surfaceDecorative,";opacity:",t?0:1,";transform:translateY(",function(e){var t=e.isModern,n=e.isHidden,r=e.messageHeight;return n?"-"+(t?8:r-16)+"px":t?"50%":"-3px"}({isModern:"modern"===a.name,isHidden:t,messageHeight:i}),");transition:transform 0.2s ",a.transitions.easings.swift," 1s,opacity 0.2s ",a.transitions.easings.swift," 0.2s;will-change:opacity,transform;",n&&Object(r.c)("&:first-child{animation:",hr(1.5)," ",a.transitions.easings.swift," 1s;}"),";")}({theme:o,isAnimating:i,messageHeight:a,isHidden:n}):Object(r.c)("left:-16px;opacity:",n?0:1,";background-color:",o.colors.surfaceDecorative,";")})," ",(function(e){return"modern"===e.theme.name?yr:xr}),";"),Er=Object(f.A)("div",{target:"e1f3ob3i1"})("position:absolute;z-index:3;transform:translateY(\n\t\t",(function(e){return function(e){var t=e.isBottom,n=e.messageHeight,r=e.hasTranslation;return"calc("+(t?"":"-")+"100% - "+(t?52:n+(r?19:0))+"px)"}({isBottom:e.isBottom,messageHeight:e.messageHeight,hasTranslation:e.hasTranslation})}),"\n\t);background-color:transparent;padding-bottom:",(function(e){return e.isBottom?4:0}),"px;"),kr=Object(f.A)("div",{target:"e1f3ob3i0"})("text-align:center;background-color:",(function(e){return e.theme.colors.floatSurface}),";box-shadow:",(function(e){return e.theme.boxShadow.floating}),";padding:4px;border-radius:",(function(e){return e.theme.borderRadius.lg}),";overflow:hidden;"),Ar=i.forwardRef((function(e,t){var n=e.children,r=e.isBottom,a=e.messageHeight,o=e.hasTranslation;return i.createElement(Er,{isBottom:r,messageHeight:a,hasTranslation:o},i.createElement(kr,{ref:t},n))}));Ar.displayName="ReactionTooltip";var Sr=Ar;var Cr=["\ud83d\udc4d","\ud83d\udc4e","\u2764\ufe0f","\ud83d\ude22","\u2705","\u23f3"],Tr=Object(f.A)("ul",{target:"e1dw9wle2"})({name:"cezn9w",styles:"display:flex;list-style-type:none;padding:0;margin:0;&:focus{outline:none;}"}),_r=Object(f.A)("li",{target:"e1dw9wle1"})({name:"1usv3rz",styles:"background:transparent;border:0"}),Ir=Object(f.A)("div",{target:"e1dw9wle0"})("position:relative;margin-left:4px;",(function(e){var t=e.theme,n=e.hasTranslation;return"modern"!==t.name?Object(r.c)("margin-bottom:",n?27:8,"px;min-width:32px;min-height:32px;"):Object(r.c)("margin-bottom:",n?16:0,"px;min-width:24px;min-height:24px;")}),";"),Rr=function(e){var t=e.onReactionPicked,n=e.currentReaction,r=e.reactionWrapperRef,a=e.isActive,o=e.isVisible,l=e.isOwn,s=e.isForceHidden,u=e.scrollToBottom,m=e.hasTranslation,f=i.useState(!1),p=f[0],g=f[1],h=Object(c.z)(!1),v=h[0],O=h[1],x=Object(c.s)(n),y=i.useRef(null),w=i.useRef(null),E=Object($.useFrame)(),k=function(e,t){if(!t.current||!t.current.hasChildNodes)return{messageWidth:0,messageHeight:0};var n=e.getComputedStyle(t.current.children[0]),r=n.width,i=n.height,a=function(e){return parseInt(e.split("px")[0])};return{messageWidth:a(r),messageHeight:a(i)}}(E.window,r),A=k.messageHeight,S=k.messageWidth,C=o&&!p&&!n,T=A>200,_="modern"===Object(d.g)().name;Object(c.n)(y,(function(){return F()}),E);var I=function(e){t(e),F()},R=Object(dr.a)({onSelect:I}),z=R.useHighlightedItemId(),M=function(){var e;Object(re.c)()?R.setHighlightedItem(0):R.clearHighlightedItem(),g(!0),T&&u&&u({duration:0}),null==(e=w.current)||e.focus()},F=i.useCallback((function(){g(!1),R.clearHighlightedItem()}),[R]);return i.useEffect((function(){p&&s&&F()}),[s,p,F]),i.useEffect((function(){l&&n&&x!==n&&O()}),[l,x,n,O]),i.createElement(i.Fragment,null,i.createElement(b.a,null,i.createElement(j.c,{isVisible:p,horizontalTravel:S-32},i.createElement(Sr,{ref:y,messageHeight:A,hasTranslation:m,isBottom:T},i.createElement(Tr,{ref:w,role:"menu",tabIndex:0,onKeyDown:function(e){switch(e.stopPropagation(),e.preventDefault(),e.key){case"ArrowRight":return void R.moveHighlightedItem(1);case"ArrowLeft":return void R.moveHighlightedItem(-1);case"Home":return void R.setHighlightedItem(0);case"End":return void R.setHighlightedItem(R.items.current.length-1);case" ":case"Enter":return void R.selectHighlightedItem();case"Escape":case"Tab":return void F();default:return void R.highlightItemByString(e)}},"aria-activedescendant":z},Cr.map((function(e){return i.createElement(_r,{role:"menuitem",key:e},i.createElement(br,{onPress:function(t){t.stopPropagation(),I(e)},emoji:e,itemList:R,isSelected:e===n,actionLabel:"react with"}))})))))),i.createElement(Ir,{hasTranslation:m},a?i.createElement(i.Fragment,null,C?i.createElement(B.q,{"aria-label":"add message reaction",onPress:M},_?i.createElement(B.l,null):i.createElement(B.k,null)):i.createElement(Or,{isAnimating:v,onAnimationEnd:O,isVisible:!p&&!!n,onPress:M,messageHeight:A,isBottom:T,"aria-label":"change message reaction, current reaction: "+n},i.createElement("span",null,n))):i.createElement(wr,{isHidden:!n,isOwn:l,onAnimationEnd:O,isAnimating:v,messageHeight:A,"aria-label":"message reaction: "+(n||n)},i.createElement("span",null,n))))},zr=a.a.createContext({setSelectedMessageId:m.W,selectedMessageId:null}),Mr=function(e){var t=e.children,n=a.a.useState(null),r=n[0],i=n[1],o=a.a.useMemo((function(){return{setSelectedMessageId:i,selectedMessageId:r}}),[r,i]);return a.a.createElement(zr.Provider,{value:o},t)};var Fr=Object(f.A)("div",{target:"e5gqefa2"})("display:flex;align-items:flex-end;flex-direction:",(function(e){var t=e.isOwn,n=e.theme;return t&&"modern"!==n.name?"row-reverse":"row"}),";overflow:visible;max-width:100%;"),Hr=Object(f.A)("div",{target:"e5gqefa1"})("display:flex;flex-direction:column;margin-bottom:",(function(e){var t=e.withMarginBottom,n=e.theme;return t&&"modern"!==n.name?6:0}),"px;transition:margin-bottom 200ms ",(function(e){return e.theme.transitions.easings.swift}),";transition-delay:300ms;will-change:margin-bottom;max-width:100%;"),Pr=Object(f.A)("div",{target:"e5gqefa0"})({name:"16i1tr9",styles:"position:absolute;width:0px;height:0px;overflow:hidden"});var qr=Object(o.c)((function(e,t){var n=t.chatId,r=t.id,i=t.showMoment,a=function(t){s.rb(e,t)||v.o(e)};return function(e,t){var n;return function(r){var i=e(r);if(void 0===i)return n;var a=t(r,i);return n=a,a}}((function(e){return e.getEvent(n,r)}),(function(e,t){var o,c,u=e.getChat(n),d=u.properties.lastThread===t.thread,f="form"===t.type&&!t.properties.answered&&s.T(e,n);return{event:t,chatId:n,showMoment:i,handleGreetingDisplayed:a,showFillFormAnnouncement:f,localize:e.localize,isChatActive:u.active,author:e.getUser(t.author),mobile:e.getApplicationState("mobile"),enforceDeliveryStatusDisplay:r===Object(m.N)(Object(m.N)(e.getTimeline(n)).events).id&&t.own,isPartOfLastThread:d,deliveryStatus:s.f(e,n,r),rtl:e.getApplicationState("rtl"),addReaction:function(t){return e.emit("add_message_reaction",{eventId:r,reaction:t})},isReconnecting:s.pb(e),isLastEvent:(null==(o=e.getLastEvent(l.d))?void 0:o.id)===t.id,agentName:null==(c=s.d(l.d,e))?void 0:c.name}}))}))((function(e){var t=e,n=t.id,o=t.mobile,c=t.author,l=t.event,s=t.chatId,d=t.localize,p=t.radiusType,g=t.showMoment,h=t.scrollTarget,v=t.deliveryStatus,O=t.enforceDeliveryStatusDisplay,x=t.listItemHandlers,y=t.showMetaOnClick,w=t.setScrollTargetNode,E=t.handleGreetingDisplayed,k=t.showFillFormAnnouncement,A=t.rtl,S=t.addReaction,C=t.isChatActive,T=t.isPartOfLastThread,_=t.isReconnecting,I=t.isLastEvent,R=t.scrollToBottom,z=t.increasedAvatarPadding,M=t.agentName,F=i.useRef(null),H=i.useState(l.properties.reaction||""),P=H[0],q=H[1],D=i.useState(!l.own&&!l.seen),B=D[0],L=D[1],N=a.a.useContext(zr),U=N.selectedMessageId,V=N.setSelectedMessageId,W=Object(Jt.d)("message_reactions"),Y=!l.own&&!!l.serverId&&!!l.thread&&C&&T&&!_;i.useEffect((function(){q(l.properties.reaction)}),[l.properties.reaction]);var G,K="system"===c.type;if("system_message"===l.type){var Q=l.properties,J=Q.systemMessageType,X=Q.textVariables,Z=Q.defaultText;return i.createElement(Lt,null,J?d(J,X):Z)}return"email_prompt"===l.type||"ask_for_email"===l.properties.formId?l.properties.answered?null:i.createElement(wn,{event:Object(u.a)({},l,{thread:l.thread}),chatId:s}):"form"===l.type?i.createElement(i.Fragment,null,k&&i.createElement(ur,null),i.createElement(r.a,null,(function(e){var t=e.theme;return i.createElement(b.a,{appear:k,component:null},i.createElement(j.a,{delay:100},i.createElement(Un,{id:l.id,chatId:s,form:l,theme:t,setScrollTargetNode:"form"===h?w:void 0})))}))):"boosters"===l.type?i.createElement(cr,{boosters:l.properties.boosters,showMoment:g,setScrollTargetNode:"boosters"===h?w:void 0}):i.createElement(f.i,Object(u.a)({date:K?"":(G=l.timestamp,new Date(G).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})),deliveryStatus:v,enforceDeliveryStatusDisplay:O,failed:l.failed,isOwn:l.own,onSeen:function(){L(!1),x.markAsSeen(n)},seen:!B,sending:!l.delivered&&!l.failed,showMetaOnClick:!K&&y,system:K,ref:function(e){e&&"draft"===h&&w&&w(e),e&&F.current&&"carousel"===l.type&&(F.current.style.maxWidth=getComputedStyle(e).width)},authorName:i.createElement($e.a,null,l.own&&!c.name?d("client"):c.name),increasedAvatarPadding:z},Y&&{onMouseLeave:function(){return V(null)},onMouseEnter:function(){return V(n)},onFocus:function(){return V(n)},onBlur:function(){return V(null)}},o&&Y&&{onPress:function(){return V(U===n?null:n)}}),i.createElement(Fr,{isOwn:l.own},i.createElement(Hr,{withMarginBottom:!!P&&!l.properties.translation,ref:F},i.createElement(Pr,{role:"status","aria-live":"polite","aria-relevant":"additions"},M&&l.properties.reaction&&l.own&&M+" reacted with "+l.properties.reaction+" to the message: "+l.properties.text),i.createElement(qt.a,{event:l,mobile:o,radiusType:p,disabledButtons:function(){var e;if(!(null==(e=l.properties.card)?void 0:e.buttons))return[];var t=C&&T;if(l.properties.invitation)return l.thread?l.properties.card.buttons.reduce((function(e,n,r){return"cancel"===n.type&&e.push(r),Object(m.E)(n.type,["webview","message"])&&!t&&e.push(r),e}),[]):[];return l.properties.card.buttons.reduce((function(e,n,r){return function(e){switch(e.type){case"webview":case"message":return!t;default:return!1}}(n)&&e.push(r),e}),[])}(),onActionButtonClick:x.handleActionButtonClick,rtl:A,onShow:l.properties.invitation?function(){return E(l)}:void 0})),W?i.createElement(Rr,{onReactionPicked:function(e){var t=e===l.properties.reaction?"":e;q(t),S(t)},currentReaction:P,reactionWrapperRef:F,isActive:Y,isOwn:l.own,isVisible:U===n,isForceHidden:_,scrollToBottom:I?R:void 0,hasTranslation:!!l.properties.translation}):null))})),Dr=n(104),Br=Object(f.A)("label",{target:"e1e9gyrb2"})("color:",(function(e){return e.theme.colors.textPrimaryColor}),";cursor:",(function(e){return e.disabled?"not-allowed":"pointer"}),";display:flex;align-items:center;"),Lr=Object(f.A)("span",{target:"e1e9gyrb1"})("display:flex;align-items:center;justify-content:center;&:focus{outline-style:",(function(e){return e.focusVisible?"auto":"none"}),";}"),Nr=Object(f.A)("span",{target:"e1e9gyrb0"})("display:inline-block;",(function(e){var t=e.theme;return Object(r.c)("margin-",t.isRtl?"right":"left",":5px;")}),";"),Ur=function(e){var t=e.disabled,n=e.icon,r=e.label,a=e.fileInputRef,o=Object(d.g)(),l=Object(c.l)((function(){return a.current.click()})),s=Object(re.f)(),m=function(e){return e||B.b}(n);return i.createElement(Br,{flexFit:!0,htmlFor:"fileupload",disabled:t},i.createElement(Lr,Object(u.a)({role:"button","aria-label":"Send a file",tabIndex:"0"},l,s),i.createElement(m,{color:t?o.colors.tertiaryTextColor:"currentColor","aria-hidden":!0}),r?i.createElement(Nr,null,r):null))};var Vr=Object(m.d)(["\ud83d\ude42","\ud83d\ude01","\ud83d\ude02","\ud83d\ude0a","\ud83d\ude0d","\ud83d\ude10","\ud83d\ude15","\ud83d\ude12","\ud83d\ude22","\ud83d\ude2d","\ud83c\udf89","\u2764\ufe0f","\ud83d\udc4c","\ud83d\udc4d","\ud83d\ude4f"],5),Wr=Object(f.A)("div",{target:"e1pkkif43"})({name:"14y8lnv",styles:"margin:0;padding:0;outline:none"}),Yr=Object(f.A)(B.q,{target:"e1pkkif42"})("display:flex;justify-content:center;align-items:center;color:",(function(e){var t=e.theme;return e.disabled?t.colors.tertiaryTextColor:t.colors.primaryTextColor}),";will-change:background-color;background-color:",(function(e){var t=e.theme;return e.active?t.colors.pressedElement:"transparent"}),";transition:background-color 150ms ease-in-out;opacity:1;"),Gr=Object(f.A)("div",{target:"e1pkkif41"})({name:"frpnj0",styles:"display:flex;flex-direction:row;align-items:center;justify-content:flex-start"}),Kr=Object(f.A)("div",{target:"e1pkkif40"})({name:"1uuyw89",styles:"display:flex;align-items:center;justify-content:center;flex-shrink:0;flex-grow:0"}),Qr=function(e){var t=e.onEmojiPicked,n=e.disabled,r=i.useRef(null),a=i.useRef(null),o=i.useRef({open:m.W,close:m.W}),c=i.useState(!1),l=c[0],s=c[1],u=function(e){t(e),o.current.close(),Math.random()<.1&&Object(cn.d)("Emoji_inserted_from_picker",{emoji:e})},d=Object(dr.a)({onSelect:u}),f=d.useHighlightedItemId();i.useEffect((function(){n&&l&&o.current.close()}),[n,l]);return 0===Vr.length||Object(on.g)()?null:i.createElement(Ne,{animated:!0,placement:"top",trigger:"press",kind:"float",controlsRef:o,onOpenChange:function(e,t){var n;if(Object(re.c)()?d.setHighlightedItem(0):d.clearHighlightedItem(),e)null==(n=a.current)||n.focus(),Math.random()<.01&&Object(cn.d)("emoji_picker_opened",{});else if(!t){var i;null==(i=r.current)||i.focus()}s(e)},description:i.createElement(Wr,{tabIndex:0,role:"grid","aria-label":"emoji picker",ref:a,"aria-activedescendant":f,onKeyDown:function(e){switch(e.key){case"ArrowUp":d.highlightedIndex.current-5>=0&&d.moveHighlightedItem(-5);break;case"ArrowDown":d.highlightedIndex.current+5<d.items.current.length&&d.moveHighlightedItem(5);break;case"ArrowLeft":d.highlightedIndex.current-1>=0&&d.moveHighlightedItem(-1);break;case"ArrowRight":d.highlightedIndex.current+1<d.items.current.length&&d.moveHighlightedItem(1);break;case"Home":d.setHighlightedItem(0);break;case"End":d.setHighlightedItem(d.items.current.length-1);break;case" ":case"Enter":e.preventDefault(),d.selectHighlightedItem();break;case"Tab":return void e.preventDefault();default:return void d.highlightItemByString(e)}e.preventDefault()}},Vr.map((function(e,t){return i.createElement(Gr,{key:t,role:"row"},e.map((function(e,t){return i.createElement(Kr,{key:t,role:"gridcell"},i.createElement(br,{emoji:e,itemList:d,onPress:function(){return u(e)}}))})))})))},i.createElement(Yr,{"aria-label":"open emoji picker",ref:r,active:l,onPress:function(){l&&o.current.close()},disabled:n},i.createElement(B.m,null)))},Jr=n(14),Xr=i.createContext({}),Zr=Object(f.A)("ul",{target:"e1ixnb8m0"})("list-style-type:none;position:absolute;z-index:100;background:",(function(e){return e.theme.colors.floatSurface}),";box-shadow:",(function(e){return e.theme.boxShadow.md}),";border-radius:",(function(e){return e.theme.borderRadius.lg}),";margin:0;margin-top:3.2em;margin-left:0.8em;padding:0;min-width:180px;overflow:hidden;&:focus{outline:none;}&>:last-child{border-bottom:0;}"),$r=function(e){var t=function(e){var t=e.highlightedIndex,n=e.items,r=t.current;return null===r||r<0||0===n.current.length?null:n.current[r].ref}(e);return null!==t&&"true"!==t.current.getAttribute("aria-disabled")};var ei=function(e){var t=e.children,n=e.onClose,r=e.menuButtonRef,a=e.onSelect,o=Object(O.a)(e,["children","onClose","menuButtonRef","onSelect"]),l=Object($.useFrame)(),s=i.useRef(null),d=i.useRef(!1),m=Object(dr.a)({onSelect:a}),f=m.useHighlightedItemId();return Object(c.n)(s,(function(e){r.current.contains(e.target)||n()}),l),Object(c.o)((function(){s.current&&s.current.focus()})),i.createElement(ne,null,i.createElement(Xr.Provider,{value:m},i.createElement(Zr,Object(u.a)({onMouseOut:m.clearHighlightedItem,tabIndex:-1,role:"menu",ref:s,"aria-activedescendant":f,onMouseDown:function(){return d.current=!1},onKeyDown:function(e){switch(d.current=!0,e.preventDefault(),e.key){case"ArrowUp":return void m.moveHighlightedItem(-1);case"ArrowDown":return void m.moveHighlightedItem(1);case"Home":return void m.setHighlightedItem(0);case"End":return void m.setHighlightedItem(m.items.current.length-1);case" ":if(!$r(m))return;return void m.selectHighlightedItem();case"Enter":if(!$r(m))return;return m.selectHighlightedItem(),n(),void r.current.focus();case"Tab":return n(),e.shiftKey?void r.current.focus():void Object(Jr.f)(r.current).focus();case"Escape":return n(),void r.current.focus();default:return void m.highlightItemByString(e)}}},o),t)))},ti=Object(f.A)("li",{target:"ezmrzej0"})("background:transparent;font-family:inherit;font-size:14px;border:0;display:flex;align-items:center;padding:18px 25px;width:100%;cursor:pointer;border-bottom:",(function(e){return"1px solid "+e.theme.colors.divider}),";color:",(function(e){var t=e.highlighted,n=e.theme;return t?n.colors.ctaText:n.colors.primaryTextColor}),";background-color:",(function(e){var t=e.highlighted,n=e.theme;return t&&n.colors.cta}),";&[aria-disabled='true']{pointer-events:none;color:",(function(e){return e.theme.colors.disabledContrast}),";background-color:",(function(e){return e.theme.colors.disabled}),";}"),ni=function(e){var t=e.disabled,n=e.text,r=e.value,a=Object(O.a)(e,["disabled","text","value"]),o=i.useRef(null),c=i.useContext(Xr),l=c.clearHighlightedItem,s=(0,c.useItem)({ref:o,text:n,value:r}),d=s.id,m=s.highlight,f=s.select,b=(0,s.useHighlighted)();return i.createElement(ti,Object(u.a)({role:"menuitem",id:d,ref:o,highlighted:b,onMouseOver:m,onMouseOut:l,onClick:function(e){1!==e.nativeEvent.which||t||f()}},t&&{"aria-disabled":!0},a))};var ri=function(e){return Object(r.c)("padding:0;color:",e.colors.tertiaryTextColor,";border-radius:",e.borderRadius.md,";transition:background-color 100ms ease-in-out;margin-left:",e.spaces.space1,";opacity:1;&:disabled{svg *{fill:",e.colors.tertiaryTextColor,";}}svg *{transition:fill 100ms ease-in-out;will-change:fill;}")},ii=Object(f.A)("div",{target:"ex4ls1q3"})("position:absolute;top:0;height:100%;display:flex;align-items:center;",(function(e){return e.position+": "+(e.dense?"0.75em":"20px")}),";color:",(function(e){return e.theme.colors.primaryTextColor}),";"),ai=Object(f.A)(f.q,{target:"ex4ls1q2"})({name:"bjn8wh",styles:"position:relative"}),oi={name:"1oaeivz",styles:"margin-right:8px"},ci={name:"1qkltea",styles:"margin-left:5px"},li=Object(f.A)(B.q,{target:"ex4ls1q1"})("display:flex;color:",(function(e){var t=e.theme;return e.disabled?t.colors.tertiaryTextColor:t.colors.primaryTextColor}),";will-change:background-color;background-color:",(function(e){var t=e.theme;return e.active?t.colors.pressedElement:"transparent"}),";transition:background-color 150ms ease-in-out;opacity:1;svg{display:block;}"),si=Object(f.A)("input",{target:"ex4ls1q0"})({name:"eivff4",styles:"display:none"}),ui={name:"zefn70",styles:"bottom:4.8em;right:2em"};var di=Object(o.c)((function(e,t){var n=t.chatId,r=function(t,n){v.e(e,t,n)},i=function(t){v.D(e,n,t)},a=function(t){v.G(e,n,t)},o=function(){v.I(e,Object(u.a)({source:"message_box"},s.y(e)))};return function(t){return{sendFile:r,sendMessage:i,setMessageDraft:a,openVideoCallMoment:o,messageDraft:t.getApplicationState("messageDraft"),reconnecting:s.pb(t),allowInput:s.hb(t),allowFileUpload:s.gb(t),isFileUploadPossible:s.O(t),mobile:t.getApplicationState("mobile"),applicationFocused:t.getApplicationState("applicationFocused"),videoCallButtonState:s.x(t),rtl:t.getApplicationState("rtl"),showAlternativeUploadOption:!t.getApplicationState("mobile")&&"code"===s.a(t)&&s.gb(t),showPermissionDeniedMessage:function(){return r=t.localize("screenshot_permission_error"),void v.b(e,n,{text:r});var r}}}}))((function(e){var t=e.allowFileUpload,n=e.isFileUploadPossible,a=e.mobile,l=e.onHeightChange,s=e.onSendMessage,d=e.allowInput,b=e.reconnecting,p=e.sendFile,g=e.sendMessage,h=e.setMessageDraft,v=(e.applicationFocused,e.onFocusChange),j=e.openVideoCallMoment,x=e.videoCallButtonState,y=e.rtl,w=e.showAlternativeUploadOption,E=e.messageDraft,k=e.showPermissionDeniedMessage,A=Object(O.a)(e,["allowFileUpload","isFileUploadPossible","mobile","onHeightChange","onSendMessage","allowInput","reconnecting","sendFile","sendMessage","setMessageDraft","applicationFocused","onFocusChange","openVideoCallMoment","videoCallButtonState","rtl","showAlternativeUploadOption","messageDraft","showPermissionDeniedMessage"]),S=i.useRef(null),C=i.useRef(null),T=i.useRef([0,0]),_=i.useRef(null),I=Object(c.i)("text-composer"),R=I.get(),z=i.useState(R||E||""),M=z[0],F=z[1],H=i.useState(!1),P=H[0],q=H[1],D=i.useState(!1),L=D[0],N=D[1],U=i.useMemo((function(){return h}),[h]),V=Object(c.e)(b),W=Object(fe.b)(),Y=y?"rtl":"ltr",G=Object($.useFrame)().document,K=i.useCallback((function(e,t){return e.forEach((function(e){return p(e,t)}))}),[p]),Q=i.useCallback((function(e){switch(q(!1),e){case"screenshot":ne(),Object(cn.d)("snapshot_selected",{});break;case"file":_.current.click()}}),[q,ne]),J=i.useCallback((function(){N(!0),v&&v(!0)}),[v]),X=i.useCallback((function(){N(!1),v&&v(!1)}),[v]),ee=i.useCallback((function(e){F(""),g(e),h(null),I.clear(),s&&s()}),[g,s,h,I]),te=i.useCallback((function(e){K(Object(m.wb)(e.target.files))}),[K]),ne=i.useCallback((function(){Object(Jt.a)().then((function(e){K([e],"screenshot")})).catch((function(e){"NotAllowedError"===e.name&&k(),Object(cn.d)("snapshot_cancel",{reason:e.message})}))}),[K,k]);i.useEffect((function(){var e=S.current,t=function(){T.current=[e.selectionStart,e.selectionEnd]};return e.addEventListener("blur",t),function(){return e.removeEventListener("blur",t)}}),[]),i.useEffect((function(){var e=function(e){var t=Array.from(e.clipboardData.items);if(!t.some((function(e){return"text/plain"===e.type}))){var n=t.reduce((function(e,t){var n=t.getAsFile();return n&&e.push(n),e}),[]);n.length&&(e.preventDefault(),K(n,"clipboard"))}};return t&&L&&n&&G.addEventListener("paste",e),function(){return G.removeEventListener("paste",e)}}),[t,L,n,G,p,K]);var re=function(e){var t=T.current,n=t[0],r=t[1];Z.a.flushSync((function(){F((function(t){var i=t.slice(0,n)+e+t.slice(r,t.length);return I.set(i),i}))})),Z.a.flushSync((function(){S.current.focus();var t=n+e.length;S.current.setSelectionRange(t,t)}))};return Object(r.d)(o.a,null,(function(e){return Object(r.d)(f.t,Object(u.a)({},A,{value:M,active:d,disabled:b&&!V,mobile:a,defaultValue:R,onSend:ee,onValueChange:function(e){F(e),I.set(e),U(e)}}),Object(r.d)(ai,{verticalAlign:"center"},x.visible&&Object(r.d)(ii,{position:"left",dense:x.visible},Object(r.d)(Ne,{placement:"top",description:"Start a video call"},Object(r.d)(B.q,{onPress:j,disabled:x.disabled,css:function(e){return{opacity:1,color:x.disabled?e.colors.tertiaryTextColor:e.colors.primaryTextColor}},"aria-label":"Start a video call"},Object(r.d)(B.S,null)))),Object(r.d)(f.u,{ref:S,autoFocus:Object(Ae.c)(),css:function(e){return function(e){var t=e.disabled,n=e.leftIcons,i=e.mobile,a=e.theme;return Object(r.c)("font-family:inherit;padding:1.25em ",a.isRtl&&!i&&"modern"!==a.name?"135px":"125px"," 1.25em ",n?"3.75em":"20px",";overflow-y:auto;margin-top:0;transition:box-shadow 0.1s ease-in-out;color:",t?a.colors.tertiaryTextColor:a.colors.primaryTextColor,";background-color:",t?a.colors.disabled:Object(jt.g)(.012,a.colors.surface),";&:focus{background-color:",a.colors.surface,";}&:disabled{cursor:not-allowed;}")}({theme:e,mobile:a,disabled:b&&!V,leftIcons:x.visible})},disabled:b&&!V,flexFill:!0,minRows:1,onClick:function(){L||S.current.focus()},onBlur:X,onFocus:J,onHeightChange:l,placeholder:e("embedded_textarea_placeholder"),"aria-label":e("embedded_textarea_placeholder"),enterKeyHint:"send",dir:M?"auto":Y}),Object(r.d)(ii,{position:"right",dense:x.visible},Object(r.d)(Qr,{onEmojiPicked:re,disabled:b&&!V}),t&&!w&&Object(r.d)(Ur,{disabled:!n,handleFileChange:te,fileInputRef:_}),w&&Object(r.d)(li,{"aria-label":"Add an attachment",ref:C,onPress:function(){return q(!P)},disabled:!n,active:P},Object(r.d)(B.b,{"aria-hidden":"true"})),P&&Object(r.d)(ei,{"aria-label":"File upload menu",menuButtonRef:C,onClose:function(){return q(!1)},css:ui,onSelect:Q},Object(r.d)(ni,{value:"file"},Object(r.d)(Ur,{disabled:!n,handleFileChange:te,label:e("send_file"),icon:B.o})),Object(r.d)(ni,{value:"screenshot"},Object(r.d)(B.G,{css:function(e){return function(e){return e.isRtl?ci:oi}(e)},"aria-hidden":!0}),e("attach_screenshot"))),Object(r.d)(f.r,{flexFit:!0,icon:Object(r.d)(B.I,null),css:ri,"aria-label":"Send a message"}),!W&&Object(r.d)(si,{multiple:!0,onChange:te,type:"file",value:"",id:"fileupload",ref:_,disabled:!n}))))}))})),mi="Toggle modal",fi="set_can_be_shown",bi="expand",pi="collapse",gi="toggle_collapsed",hi="main_transition_start",vi="main_transition_end",ji="drawer_transition_end",Oi="reset_collapsed",xi="show_conifrmation_modal",yi="hide_conifrmation_modal",wi=function(){return{type:fi}},Ei=function(){return{type:bi}},ki=function(){return{type:pi}},Ai=function(){return{type:gi}},Si=function(){return{type:hi}},Ci=function(){return{type:vi}},Ti=function(){return{type:ji}},_i=function(){return{type:Oi}},Ii=function(e){return{type:xi,payload:e}},Ri=function(){return{type:yi}},zi=function(e,t){switch(t.type){case fi:return Object(u.a)({},e,{canBeShown:!0});case bi:return Object(u.a)({},e,{collapsed:!1});case pi:return Object(u.a)({},e,{collapsed:!0});case gi:return Object(u.a)({},e,{collapsed:!e.collapsed});case Oi:return Object(u.a)({},e,{animationEnded:!1,collapsed:!1});case hi:return Object(u.a)({},e,{isAnimating:!0});case vi:return Object(u.a)({},e,{isAnimating:!1,animationEnded:!0});case ji:return Object(u.a)({},e,{isExpanding:!1});case xi:return Object(u.a)({},e,{isConfirmationModalShown:!0,confirmationModalMode:t.payload},e.collapsed&&{isExpanding:!0,collapsed:!1});case yi:return Object(u.a)({},e,{isConfirmationModalShown:!1});default:return e}};function Mi(){var e=Object(x.a)(["\n\t&-enter,\n\t&-appear {\n\t\ttransform: translateY(100%);\n\t}\n\t&-enter-active,\n\t&-appear-active,\n\t&-enter-done,\n\t&-appear-done {\n\t\ttransform: translateY(0);\n\t\ttransition: transform ","ms ",";\n\t}\n\n\t&-exit {\n\t\ttransform: translateY(0);\n\t}\n\n\t&-exit-active {\n\t\ttransform: translateY(100%);\n\t\ttransition: transform ","ms\n\t\t\t",";\n\t}\n"]);return Mi=function(){return e},e}var Fi=function(e){return{enter:600,exit:e?200:400}},Hi=function(e,t,n,r){return e(Mi(),(n?0:600)*t,r.transitions.easings.swift,(n?200:400)*t,r.transitions.easings.swift)},Pi=function(e){var t=e.show,n=e.collapsed,a=e.durationFactor,o=e.onTransitionStart,c=e.onTransitionEnd,l=e.children,s=e.nodeRef;return i.createElement(r.a,null,(function(e){var r=e.css,u=e.theme;return i.createElement(b.a,{appear:!0,component:null},t&&i.createElement(y.a,{timeout:Fi(n),onExited:c,onEntered:c,onExiting:o,onEntering:o,classNames:Hi(r,a,n,u),nodeRef:s},l))}))},qi=n(678),Di="transform, height, bottom, min-height, max-height, box-shadow, z-index, border-radius",Bi=i.forwardRef((function(e,t){var n=e.heightPercentage,a=e.collapsed,o=e.children,l=e.animationEnded,s=e.onTransitionEnd,d=e.isFooterHidden,m=Object(O.a)(e,["heightPercentage","collapsed","children","animationEnded","onTransitionEnd","isFooterHidden"]),f=i.useRef(null),b=Object(c.c)(f,t),p=Object(fe.b)();return Object(c.g)("touchmove",f),Object(c.b)(p?null:f),Object(r.d)(qi.a,{autoFocus:!1,disabled:a,returnFocus:!0,crossFrame:!1,css:function(e){return function(e){var t=e.heightPercentage,n=e.collapsed,i=e.animationEnded,a=e.isFooterHidden,o=e.theme;return Object(r.c)("position:absolute;z-index:",n?100:1500,";display:flex;flex-direction:column;height:",n?"48px":100*t+"%",";min-height:",n?"48px":"270px",";max-height:",n?"48px":"100%",";width:100%;bottom:",function(e,t,n){return!t||e?0:"modern"===n.name?32:24}(a,n,o),"px;border-radius:",n?0:"inherit",";color:",o.colors.primaryTextColor,";background-color:",o.colors.floatSurface,";box-shadow:",n?o.boxShadow.floating:"none",";",i&&{transitionProperty:Di,transitionDuration:600*t+"ms",transitionTimingFunction:""+o.transitions.easings.swift,willChange:Di},";")}({heightPercentage:n,collapsed:a,animationEnded:l,isFooterHidden:d,theme:e})},ref:b,lockProps:Object(u.a)({role:"dialog","aria-modal":!0,onTransitionEnd:s},m)},o)})),Li=n(73),Ni={allowtransparency:"true",scrolling:"yes",style:{position:"absolute",minWidth:"100%",minHeight:"100%",height:"1px",width:"1px",margin:"0",padding:"0",background:"none",border:"0"}},Ui=function(e,t){return Object(u.a)({moment_url:Object(V.f)(e)+Object(V.g)(e),moment_origin:Object(V.f)(e)||""},t&&{ui_source:t})},Vi=function(e){return Object(r.c)("flex-grow:1;position:relative;overflow:auto;-webkit-overflow-scrolling:touch;display:",e?"none":"block",";background-color:#ffffff;")},Wi=function(e,t,n){var r=document.createElement("iframe");return r.allow=n,r.src=t,e.appendChild(r),r},Yi=function(e){var t=e.id,n=e.url,a=e.close,o=e.hidden,c=e.sendMessage,l=e.sendSystemMessage,s=e.setAttributes,u=e.onLoadingChanged,d=e.onMomentDataChanged,f=e.iframeAllowedProperties,b=e.getCustomerToken,p=e.updateCustomerData,g=e.licenseId,h=e.chatId,v=e.source,j=i.useRef(void 0),O=i.useRef(m.W),x=i.useRef(m.W),y=i.createRef();return O.current=function(){if(n&&y.current){var e={close:a,sendMessage:c,setAttributes:s,updateCustomerData:p,licenseId:g,chatId:h,setExternalLink:function(e){d({externalLink:e})},setIsFragile:function(e){d({isFragile:e})},getIdentityTransferToken:function(){if(dn(n))return b().then((function(e){return function(e){var t=e.accessToken;return Object(Li.a)(Object(Jt.b)("accounts")+"/customer/identity_transfer",{method:"POST",headers:{Authorization:"Bearer "+t},body:JSON.stringify({bearer_type:"customer",client_id:"c5e4f61e1a6c3b1521b541bc5c5a2ac5"})}).then((function(e){return e.json()})).then((function(e){return Object(m.P)(m.b,e)}))}(e)})).catch((function(e){return e}));throw new Error("Moment App not authorized")}};l&&(e.sendSystemMessage=l),j.current=Object(sn.b)({frame:Wi(y.current,n,f),url:n,onConnected:function(e){var t=e.data;u(!1),d(t)}},e),Object(Jr.a)(Ni,j.current.frame),u(!0),j.current.frame.addEventListener("load",(function e(){j.current&&(u(!1),j.current.frame.removeEventListener("load",e))})),d({title:j.current.title}),Object(cn.d)("moment_opened",Ui(Object(sn.a)(n),v))}},x.current=function(){j.current&&(j.current.destroy(),y.current&&(y.current.innerHTML=""),d(null),u(!1),j.current=void 0),n&&Object(cn.d)("moment_closed",Ui(Object(sn.a)(n)))},i.useEffect((function(){return O.current(),function(){return x.current()}}),[n]),Object(r.d)("div",{id:t,ref:y,css:Vi(o),onScroll:function(e){!function(e){if(e){var t=e.scrollTop,n=e.scrollHeight-e.offsetHeight;0===t?e.scrollTop=1:t===n&&(e.scrollTop=n-1)}}(e.currentTarget)}})},Gi=n(228),Ki="confirmation-modal-label-id",Qi={fragile:function(){return"Any data or connection will be lost after you close this window"},change:function(e){return'If you open another app, "'+e+'" will be closed.'},"fragile-change":function(e){return'If you open another app, "'+e+"\" will be closed. You'll lose data and connection."}},Ji=Object(f.A)("div",{target:"ej1cp8k3"})("z-index:1500;position:absolute;top:42px;left:50%;min-width:75%;max-width:285px;display:flex;flex-direction:column;background:",(function(e){return e.theme.colors.surface}),";box-shadow:",(function(e){return e.theme.boxShadow.lg}),";padding:",(function(e){return e.theme.spaces.space6}),";border-radius:",(function(e){return e.theme.borderRadius.md}),";"),Xi=Object(f.A)(Gi.a,{target:"ej1cp8k2"})("display:flex;width:auto;flex-grow:",(function(e){return e.secondary?1:1.5}),";padding:8px 12px;",(function(e){var t=e.secondary,n=e.theme;return t&&{backgroundColor:n.colors.surfaceDecorative,color:n.colors.primaryTextColor}})," &:first-child{margin-right:",(function(e){return e.theme.spaces.space4}),";}"),Zi=Object(f.A)("p",{target:"ej1cp8k1"})("margin:0;overflow-wrap:break-word;",(function(e){return e.theme.typography.basic}),";"),$i=Object(f.A)("div",{target:"ej1cp8k0"})("width:100%;display:flex;align-self:center;margin-top:",(function(e){return e.theme.spaces.space4}),";"),ea=function(e){var t=e.shown,n=e.onResponse,r=e.mode,a=e.currentAppName,o=i.useRef(null),c=Object(Q.c)({isOpen:!0,isDismissable:!0,onClose:function(){return n("canceled")}},o).overlayProps,l=Object(Q.b)().modalProps,s=Object(G.a)({"aria-labelledby":Ki},o).dialogProps,d=Object(fe.b)(),f="fragile"!==r,p=Object(m.E)("fragile",r);return Object(Q.d)({isDisabled:d}),i.createElement(i.Fragment,null,i.createElement(me,{shown:t}),i.createElement(b.a,{component:null},t&&i.createElement(j.b,{nodeRef:o},i.createElement(K.a,{contain:!0,restoreFocus:!0,autoFocus:!0},i.createElement(Ji,Object(u.a)({},Object(J.h)(c,s,l),{ref:o}),i.createElement(Zi,{id:Ki},Qi[r](a)),i.createElement($i,null,i.createElement(Xi,{secondary:!0,onClick:function(){return n("canceled")}},f?"Do nothing":"Cancel"),i.createElement(Xi,{destructive:p,onClick:function(){return n("confirmed")}},f?"Open another app":"Close anyway")))))))},ta=n(164),na=n(266);var ra=Object(f.A)(B.f,{target:"e1crrbvm3"})((function(e){return"up"===e.direction&&{transform:"scaleY(-1)"}}),";"),ia=Object(f.A)("div",{target:"e1crrbvm2"})("min-height:",(function(e){return e.visible?48:0}),"px;transition:min-height 300ms ",(function(e){return e.theme.transitions.easings.swift}),";"),aa=Object(f.A)(B.q,{target:"e1crrbvm1"})({name:"nekhfk",styles:"display:flex;align-items:center;width:100%;background-color:transparent;border:none;cursor:pointer"}),oa=Object(f.A)(Kn,{target:"e1crrbvm0"})({name:"1flj9lk",styles:"text-align:left"}),ca={full:.8,tall:.5,compact:.3},la={name:"zjik7",styles:"display:flex"},sa=Object(o.c)((function(e,t){var n=t.chatId,r=function(t){return void 0===t&&(t=!1),v.h(e,t)},i=function(t){return v.S(e,{properties:t})},a=function(t){["email","name"].forEach((function(e){(t[e]&&"string"!==typeof t[e]||""===t[e])&&delete t[e]})),(t.email||t.name)&&v.S(e,t)},o=function(t){return v.D(e,n,t)},c=Object(na.a)({allowVideoConferencing:Object(s.E)(e,"microphone"),allowClipboardWrite:Object(s.E)(e,"clipboard_write")}),l=function(t){return v.C(e,n,t)};return function(e){var t=e.getView("Moment"),n=t.show,u=t.data,d=u.url,m=Object(O.a)(u,["url"]),f=e.getApplicationState("license");return{show:n,closeMoment:r,sendMessage:o,sendSystemMessage:l,updateSessionUser:i,onUpdateCustomerData:a,momentData:m,url:d,iframeAllowedProperties:c,getCustomerToken:function(){return new Promise((function(t,n){e.once("customer_token_response",t),e.once("customer_token_error",n),e.emit("request_customer_token")}))},licenseId:f,isFooterHidden:Object(s.Z)(e),registerRequestCloseMomentListener:function(t){return e.on("request_close_moment",t),function(){return e.off("request_close_moment",t)}},registerRequestExpandMomentListener:function(t){return e.on("request_expand_moment",t),function(){return e.off("request_expand_moment",t)}},minimizeWidget:function(t){return void 0===t&&(t=!1),v.x(e,!1,t)},setNextMomentData:function(t){return e.updateView("Moment",{show:!0,data:t})},chatId:Object(s.c)(e)||void 0}}}))((function(e){var t=e.iframeAllowedProperties,n=e.show,a=e.url,o=e.updateSessionUser,l=e.sendMessage,s=e.sendSystemMessage,d=e.onSendMessage,f=e.getCustomerToken,b=e.licenseId,p=e.onUpdateCustomerData,g=e.isFooterHidden,h=e.registerRequestCloseMomentListener,v=e.registerRequestExpandMomentListener,j=e.minimizeWidget,O=e.setNextMomentData,x=e.chatId,y=Object(c.i)("moment-collapsed"),w={canBeShown:!1,collapsed:!1,isExpanding:!0,isAnimating:!1,animationEnded:!1,isConfirmationModalShown:!1,confirmationModalMode:"change"},E=i.useReducer(zi,w,(function(){var t;return Object(u.a)({},w,{collapsed:!!(null==(t=y.get())?void 0:t.collapsed)&&!e.momentData.wasTriggeredByGreeting})})),k=E[0],A=k.canBeShown,S=k.collapsed,C=k.isExpanding,T=k.isAnimating,_=k.animationEnded,I=k.isConfirmationModalShown,R=k.confirmationModalMode,z=E[1],M=i.useRef(null),F=i.useRef(null),H=i.useState(!1),P=H[0],q=H[1],D=i.useState({}),L=D[0],N=D[1],U=i.useState(!1),V=U[0],W=U[1],Y=i.useRef(!1),G=i.useRef(null),K=Object(re.f)(),Q=Object(c.f)(A&&n,(function(){return e.closeMoment(V)})),X=Q[0],Z=Q[1],$=T||P,ee=function(e){var t=e.height;return t&&t in ca?ca[t]:ca.full}(e.momentData),te=ee/.8,ne=Object(J.l)(),ie=Object(be.b)();Object(m.G)(L)&&!Object(m.G)(e.momentData)&&N(Object(u.a)({},L,e.momentData)),Object(c.y)(i.useCallback((function(){return z(wi())}),[]),300),i.useEffect((function(){e.momentData.wasTriggeredByGreeting&&_&&O(Object(u.a)({},e.momentData,{url:a,wasTriggeredByGreeting:!1}))}),[_,a,e.momentData,O]),i.useEffect((function(){var e=h((function(){if(Y.current)return W(!0),void z(Ii("fragile"));j(!0)}));return function(){return e()}}),[Y,j,h]),i.useEffect((function(){var e=v((function(e){z(Ei()),(null==e?void 0:e.nextMoment)&&(G.current=e.nextMoment,z(Ii(Y.current?"fragile-change":"change")))}));return function(){return e()}}),[v]),i.useEffect((function(){return y.set({collapsed:S})}),[y,S]),i.useEffect((function(){return ie.setMomentExpand(n&&!S)}),[n,S,ie]),i.useEffect((function(){X&&Object(J.d)(F.current)}),[X]),i.useEffect((function(){!X&&_&&z(_i())}),[X,_]);return Object(r.d)(i.Fragment,null,Object(r.d)(me,{shown:n&&!S,onPress:function(){_&&z(ki())},zIndex:99}),Object(r.d)(ia,{visible:n}),Object(r.d)(Pi,{show:X||n&&S,collapsed:S,nodeRef:M,onTransitionEnd:function(){z(Ci())},onTransitionStart:function(){z(Si())},durationFactor:te},Object(r.d)(Bi,{ref:M,heightPercentage:ee,collapsed:S,animationEnded:_,isFooterHidden:g,onTransitionEnd:function(){return z(Ti())}},Object(r.d)(Qn,{noShrink:!0},Object(r.d)(aa,{"aria-label":mi,"aria-expanded":!S,"aria-controls":ne,onPress:function(){return z(Ai())}},Object(r.d)(Gn,{src:L.icon,"aria-hidden":!0}),Object(r.d)(oa,Object(u.a)({ellipsis:!0,flexFill:!0,tabIndex:-1,ref:F},K),L.title),(!L.externalLink||S)&&Object(r.d)(ra,{direction:S?"up":"down"})),L.externalLink&&!S&&Object(r.d)(i.Fragment,null,Object(r.d)(st.a,{href:L.externalLink,rel:"nofollow noopener noreferrer",css:la,"aria-label":"Open in a new tab"},Object(r.d)(B.B,{"aria-hidden":!0})),Object(r.d)(B.q,{onPress:function(){return z(Ai())},css:la,"aria-label":mi},Object(r.d)(ra,{direction:S?"up":"down"}))),Object(r.d)(B.q,{onPress:function(){Y.current?z(Ii("fragile")):Z()},css:la,"aria-label":"Close modal"},Object(r.d)(B.g,null))),Object(r.d)(ea,{shown:!S&&!C&&!!I,mode:R,currentAppName:L.title,onResponse:function(e){if(z(Ri()),"canceled"!==e||!Object(m.E)("change",R))return G.current?("confirmed"===e&&(Y.current=!1,O(G.current)),void(G.current=null)):void("confirmed"===e&&Z());z(ki())}}),Object(r.d)(Yi,{id:ne,hidden:S||$,close:Z,url:a,licenseId:b,chatId:x,source:L.source,sendMessage:function(e){var t=e.text;l(t),d&&d(t)},sendSystemMessage:s,setAttributes:o,updateCustomerData:p,onMomentDataChanged:function(e){e&&"isFragile"in e&&(Y.current=!!e.isFragile),N((function(t){return e?Object(u.a)({},t,e):{}}))},onLoadingChanged:q,iframeAllowedProperties:t,getCustomerToken:f}),!S&&$&&Object(r.d)(ta.a,{size:"xlarge",style:{margin:"auto"}}))))})),ua=n(171),da=n(108),ma=n(111);var fa=Object(f.A)("span",{target:"e1oq7ugp9"})((function(e){var t=e.failed,n=e.theme;return{color:t?n.colors.error:n.colors.primaryTextColor}}),";"),ba=Object(f.A)("div",{target:"e1oq7ugp8"})("flex:1;display:flex;flex-direction:column;margin:2px;min-width:calc(50% - 4px);max-width:100%;height:",(function(e){var t=e.theme;return e.mobile||"modern"!==t.name?140:100}),"px;"),pa=Object(f.A)("div",{target:"e1oq7ugp7"})("border-radius:",(function(e){return e.theme.borderRadius.xl}),";flex:1;width:100%;height:100%;display:flex;overflow:hidden;position:relative;align-items:center;justify-content:center;"),ga=Object(f.A)("div",{target:"e1oq7ugp6"})("color:",(function(e){return e.theme.colors.secondaryTextColor}),";background-color:",(function(e){return e.theme.colors.surfaceDecorative}),";width:100%;height:100%;display:flex;align-items:center;justify-content:center;"),ha=Object(f.A)("img",{target:"e1oq7ugp5"})({name:"q4dzvk",styles:"width:100%;height:auto"}),va=Object(f.A)("div",{target:"e1oq7ugp4"})({name:"1uja423",styles:"position:absolute;top:6px;right:6px;z-index:1"}),ja=Object(f.A)("div",{target:"e1oq7ugp3"})("height:24px;width:24px;display:flex;border-radius:50%;align-items:center;justify-content:center;",(function(e){var t=e.theme,n=e.success,r=e.error;return n?{backgroundColor:t.colors.success,color:t.colors.successContrast}:r?{backgroundColor:t.colors.error,color:t.colors.errorContrast}:void 0}),";"),Oa=Object(f.A)("div",{target:"e1oq7ugp2"})("opacity:",(function(e){return e.visible?1:0}),";transition:opacity 100ms ",(function(e){return e.theme.transitions.easings.smooth}),";position:absolute;left:6px;right:6px;bottom:6px;display:flex;flex-direction:row-reverse;align-items:center;justify-content:space-between;z-index:1;",an.t,"{width:20px;height:20px;}"),xa=Object(f.A)("div",{target:"e1oq7ugp1"})("border-radius:",(function(e){return e.theme.borderRadius.md}),";color:",(function(e){return e.theme.colors.grayscale[0]}),";padding:2px;display:flex;flex-direction:row;align-items:center;justify-content:center;background-color:rgba(0, 0, 0, 0.6);"),ya=Object(f.A)("span",{target:"e1oq7ugp0"})((function(e){return e.theme.typography.caption}),";color:",(function(e){return e.theme.colors.grayscale[0]}),";cursor:pointer;margin-right:4px;"),wa={name:"e0dnmk",styles:"cursor:pointer"},Ea=function(e){var t=e.failReason,n=i.useRef(null),a=Object(K.e)({},n).focusableProps;return Object(r.d)(ja,Object(u.a)({"aria-label":t,error:!0},a,{ref:n,tabIndex:0}),Object(r.d)(an.c,{css:wa,size:24,"aria-hidden":!0}))},ka={name:"1nq59d9",styles:"transition:opacity 100ms linear"},Aa=function(e){var t=e.name,n=e.failed,i=e.finished,a=e.url,c=e.fileType,l=e.mobile,s=e.alternativeText,u=e.onCancel,d=e.onAlternativeTextEdit,m=e.progress,f=void 0===m?0:m,b=e.failReason,p=void 0===b?"":b,g=e.insistHover,h=e.onHoverChange,v=Object(re.i)({onHoverChange:h}),j=v.hoverProps,O=v.isHovered,x=Object(re.f)().isFocusVisible;return Object(r.d)(o.a,null,(function(e){return Object(r.d)(ba,null,Object(r.d)(pa,j,Object(r.d)(va,null,i&&Object(r.d)(ja,{success:!0},Object(r.d)(an.S,{size:24,"aria-hidden":!0})),n&&Object(r.d)(Ne,{description:p,allowTouch:!0},Object(r.d)(Ea,{failReason:p})),!i&&!n&&Object(r.d)(ta.a,{size:"medium",progress:f,"aria-hidden":!0})),(u||d)&&Object(r.d)(Oa,{visible:g||O||x||l},u&&Object(r.d)(xa,null,Object(r.d)(an.t,{onPress:u,"aria-label":"remove the "+t+" file"},Object(r.d)(an.J,{size:20,"aria-hidden":!0}))),"image"===c&&d&&Object(r.d)(xa,null,Object(r.d)(an.t,{onPress:d,"aria-label":"add alternative text to the "+t+" image"},Object(r.d)(an.l,{size:20,"aria-hidden":!0})),Object(r.d)(ya,{onClick:d},e("alt_text")))),"image"===c&&Object(r.d)(ha,{src:a,alt:s||"",style:{opacity:i?1:.25},css:ka}),"other"===c&&Object(r.d)(ga,null,Object(r.d)(an.q,{size:56}))),Object(r.d)(fa,{ellipsis:!0,failed:n,finished:i},t))}))};var Sa=Object(f.A)("p",{target:"eprg9im5"})("margin-bottom:",(function(e){var t=e.theme,n=e.mobile;return"modern"!==t.name&&n?0:4}),"px;",(function(e){return e.theme.typography.caption})," ",Object(ut.a)(),";color:",(function(e){return e.theme.colors.primaryTextColor}),";margin:0;padding:0 12px;max-width:100%;max-height:50px;"),Ca=Object(f.A)("div",{target:"eprg9im4"})((function(e){var t=e.theme;return!e.mobile&&"modern"===t.name&&"max-height: 230px; overflow-y: auto;"}),";"),Ta=Object(f.A)("div",{target:"eprg9im3"})("height:",(function(e){var t=e.theme;return e.mobile||"modern"!==t.name?145:140}),"px;overflow:hidden;display:flex;align-items:center;justify-content:center;width:100%;"),_a=Object(f.A)("div",{target:"eprg9im2"})("padding:",(function(e){var t=e.theme;return t.spaces.space3+" "+t.spaces.space5}),";display:flex;flex-direction:row;justify-content:center;align-items:center;max-width:100%;"),Ia=Object(f.A)(rn.a,{target:"eprg9im1"})("height:34px;",(function(e){var t=e.theme.isRtl?"left":"right";return Object(r.c)("border-",t,":none;border-top-",t,"-radius:0;border-bottom-",t,"-radius:0;")}),";"),Ra=Object(f.A)(B.q,{target:"eprg9im0"})("color:",(function(e){var t=e.theme;return e.highlighted?t.colors.ctaText:t.colors.disabledContrast}),";background-color:",(function(e){var t=e.theme;return e.highlighted?t.colors.cta:t.colors.disabled}),";height:34px;width:34px;justify-content:center;align-items:center;display:flex;padding:6px 8px;",(function(e){var t=e.theme,n=t.isRtl?"left":"right",i=t.isRtl?"right":"left";return Object(r.c)("border-top-",i,"-radius:0;border-bottom-",i,"-radius:0;border-top-",n,"-radius:6px;")})," transition:background 100ms linear;"),za={name:"q4dzvk",styles:"width:100%;height:auto"},Ma=function(e){var t=e.url,n=e.alternativeText,a=e.onAlternativeTextChanged,c=e.mobile,l=e.titleId,s=i.useState(n||""),u=s[0],d=s[1],m=Object(re.f)().isFocusVisible,f=Object(J.l)();return Object(r.d)(o.a,null,(function(e){return Object(r.d)(Ca,{mobile:c},Object(r.d)(Ta,{mobile:c},Object(r.d)("img",{src:t,css:za,alt:n})),Object(r.d)(_a,null,Object(r.d)(Ia,{autoFocus:!0,"aria-labelledby":l,"aria-describedby":f,maxLength:16384,value:u,placeholder:e("describe_image"),onChange:function(e){var t=e.target;return d(t.value)}}),Object(r.d)(Ra,{"aria-label":"save the image's alternative text",highlighted:u!==n||m,disabled:u===n,onPress:function(){a(u)}},Object(r.d)(B.a,{size:24}))),Object(r.d)(Sa,{id:f,mobile:c},e("alternative_text_description")))}))},Fa=n(121);var Ha=Object(f.A)("h2",{target:"e1k6tlos7"})((function(e){var t=e.failed,n=e.theme;return t&&{color:n.typography.errorCaption.color}})," padding:0 6px;font-size:14px;font-weight:normal;align-self:center;margin:0;"),Pa=Object(f.A)("div",{target:"e1k6tlos6"})({name:"189qznn",styles:"display:flex;cursor:pointer"}),qa=Object(f.A)("div",{target:"e1k6tlos5"})("transition:max-height ",(function(e){return e.longAnimation?600:400}),"ms ",(function(e){return e.theme.transitions.easings.swift}),";overflow:hidden;max-height:249px;"),Da=Object(f.A)("div",{target:"e1k6tlos4"})("height:auto;",(function(e){return e.edit&&{margin:"0 -8px"}}),";"),Ba=Object(f.A)("div",{target:"e1k6tlos3"})("max-height:",(function(e){var t=e.theme;return e.mobile||"modern"!==t.name?200:125}),"px;overflow:auto;display:flex;flex-direction:row;flex-wrap:wrap;padding:4px 0;"),La=Object(f.A)("hr",{target:"e1k6tlos2"})("margin:",8,"px -",8,"px 0;border:0;border-bottom:1px solid rgba(0, 0, 0, 0.1);"),Na=Object(f.A)(an.g,{target:"e1k6tlos1"})((function(e){return"up"===e.direction&&{transform:"scaleY(-1)"}}),";"),Ua={name:"gc6sdx",styles:"padding-left:4px"},Va=Object(f.A)(B.z,{target:"e1k6tlos0"})("padding:",(function(e){var t=e.theme,n=e.isEdit,r=e.expanded;return!e.mobile&&"modern"===t.name&&n&&r?"8px 8px 0":"8px"}),";",(function(e){return e.theme.typography.basic}),";color:",(function(e){return e.theme.colors.primaryTextColor}),";overflow:hidden;"),Wa={name:"x4j9dr",styles:"margin-top:6px;max-width:100%"},Ya={name:"13fmgtn",styles:"transform:scaleX(-1)"},Ga=Object(ma.createSelector)([m.D],(function(e){return e.map((function(e){return Object(u.a)({id:e.id},e.properties)}))})),Ka=Object(o.c)((function(e,t){var n=t.chatId,r=function(t){e.emit("cancel_upload",{eventId:t})},i=function(t,r){e.updateEvent(n,t,{properties:{alternativeText:r}})},a=function(){e.emit("send_file_events")};return function(e){var t=e.getApplicationState(),n=t.isSendingFileEvents,o=t.mobile,c=t.config,l=t.license,u=t.group,d=t.requestedGroup,m=Ga(Object(s.p)(e));return{mobile:o,persistKey:Object(Fa.a)({license:l,group:u,requestedGroup:d}),isSendingFileEvents:n,uploadEntries:m,cancelUpload:r,setAlternativeText:i,sendFiles:a,localize:e.localize,themeName:c.theme.name}}}))((function(e){var t=e.uploadEntries,n=e.uploadEnabled,a=e.cancelUpload,o=e.localize,c=e.mobile,l=e.persistKey,s=e.sendFiles,d=e.isSendingFileEvents,f=e.setAlternativeText,b=e.themeName,p=e.scrollToBottom,h=Object(J.l)(),v=Object(J.l)(),j=i.useState(!0),O=j[0],x=j[1],y=i.useState(!1),w=y[0],E=y[1],k=i.useState(!1),A=k[0],S=k[1],C=i.useState(null),T=C[0],_=C[1],I=i.useState(""),R=I[0],z=I[1],M=i.useRef(null),F=i.useRef(null),H=function(e,t){var n=e.filter((function(e){return e.failed})),r=e.filter((function(e){return e.finished})).length,i=n.length,a=e.length,o=t("file_upload_status").replace("%finishedCount%",String(r)).replace("%totalCount%",String(a));switch(!0){case i>0:return{failedCount:i,uploadStatus:"error",title:i>1?t("files_failed_to_upload").replace("%files%",String(i)):n[0].failReason};case r===a:return{uploadStatus:"success",title:o};default:return{uploadStatus:"pending",title:o}}}(t,o),P="error"===H.uploadStatus&&t.length===H.failedCount,q=function(){R&&z("")},D=i.useCallback((function(){return c||"modern"!==b?249:228}),[b,c]),B=i.useCallback((function(e){return(t.length>2||e?D():201)+"px"}),[t,D]),L=i.useCallback((function(e){U(e)&&(M.current.style.maxHeight=e)}),[]),N=function(e){return F.current.style.height=e},U=function(e){return M.current.style.maxHeight!==e},V=i.useCallback((function(){O?(E(!0),L("0px")):x(!0)}),[O,L]),W=function(e){if(O){var t=B(!!e);!e&&U(t)?(_(null),S(!0),N(F.current.clientHeight+"px"),L(t)):(L(D()+"px"),_(e))}else _(e)},Y=i.useCallback((function(){w?(x(!1),E(!1)):A&&(N("auto"),S(!1))}),[w,A]);return i.useEffect((function(){t.length&&O&&!w&&L(B(!!T))}),[t.length,O,w,L,B,T]),i.useEffect((function(){if(Object(da.b)("session")){var e=function(){Object(m.G)(t)||function(e,t){var n=e.filter((function(e){return e.finished})).map((function(e){return Object(u.a)({},e,{url:e.serverUrl})}));Object(m.G)(n)||window.sessionStorage.setItem(t,JSON.stringify(n))}(t,l)};return window.addEventListener("beforeunload",e),function(){return window.removeEventListener("beforeunload",e)}}}),[t,l]),Object(r.d)(Va,{isEdit:T,expanded:!w&&O,mobile:c},Object(r.d)(g.b,{message:H.title,clearOnUnmount:!0,"aria-live":"error"===H.uploadStatus?"assertive":"polite"}),Object(r.d)(Pa,{onClick:function(e){e.stopPropagation(),V()}},T?Object(r.d)(an.t,{"aria-label":"go back to upload list",onPress:function(){W(null)}},Object(r.d)(an.a,{size:24,css:Ya,"aria-hidden":!0})):Object(r.d)(i.Fragment,null,"pending"===H.uploadStatus?Object(r.d)(ta.a,{size:"medium","aria-hidden":!0}):"success"===H.uploadStatus?Object(r.d)(ja,{success:!0},Object(r.d)(an.S,{size:24,"aria-label":"Upload success"})):Object(r.d)(ja,{error:!0},Object(r.d)(an.c,{size:24,"aria-label":"Upload error"}))),Object(r.d)(Ha,Object(u.a)({id:v,flexFill:!0,ellipsis:!0},"error"===H.uploadStatus&&{failed:!0,title:H.title}),T?o("add_alternative_text"):H.title),Object(r.d)(an.t,{css:Ua,"aria-label":"Toggle upload list","aria-controls":h,"aria-expanded":O,onPress:V,autoFocus:!0},Object(r.d)(an.u,{size:24,"aria-hidden":!0},Object(r.d)(Na,{direction:O&&!w?"down":"up",size:24})))),O&&!w&&Object(r.d)(La,null),Object(r.d)(qa,{ref:M,onTransitionEnd:Y,longAnimation:!O||w},O&&Object(r.d)(Da,{id:h,edit:!!T,ref:F},T?Object(r.d)(Ma,Object(u.a)({titleId:v},t.find((function(e){return e.id===T})),{onAlternativeTextChanged:function(e){W(null),f(T,e)},mobile:c})):Object(r.d)(i.Fragment,null,Object(r.d)(Ba,{mobile:c},t.map((function(e){return Object(r.d)(Aa,Object(u.a)({},e,{key:e.id,mobile:c,failed:!!e.failed,insistHover:R===e.id,onHoverChange:q,onCancel:!d||e.failed?function(){return function(e){if(!c&&t.length>1){var n=Object(m.q)((function(t){return t.id===e}),t),r=n===t.length-1;z(t[n+(r?-1:1)].id)}a(e)}(e.id)}:null,onAlternativeTextEdit:d?null:function(){return W(e.id)}}))}))),Object(r.d)(Gi.a,{onClick:function(){s(),p({duration:0})},disabled:P||!n,pending:d||"pending"===H.uploadStatus,css:Wa},o("send_files"))))))}));var Qa=Object(f.A)("div",{target:"ezpiwsd0"})({name:"1u57r43",styles:"position:absolute;bottom:0;left:0;right:0;z-index:100"}),Ja=Object(o.c)((function(e,t){var n=t.markAsSeen,r=function(){s.u(l.d,Date.now(),e).reverse().forEach((function(e){return n(e.id)}))};return function(e){var t=!Object(m.G)(s.p(e)),n=e.getApplicationState("mobile"),i=s.j(e,l.d),a=e.getUnseenCount(l.d),o=i&&i.properties?i.properties.text:null;return{isFileUploadAllowed:s.gb(e),isFileUploadPossible:s.O(e),isUploadingFiles:t,previewText:o,unseenCount:a,mobile:n,markAllEventsAsSeen:r,localize:e.localize}}}))((function(e){var t=e.isFileUploadAllowed,n=e.isFileUploadPossible,r=e.isUploadingFiles,a=e.previewText,o=e.unseenCount,l=e.chatId,s=e.mobile,u=e.scrollToBottom,d=e.markAllEventsAsSeen,m=e.isOnBottomSource,f=e.isScrollable,p=e.localize,h=a,v=Object(c.w)(m),O=o>0&&!v&&f,x=i.useState(O),y=x[0],w=x[1];return h||(h=p(o>1?"new_messages":"new_message")),!O&&y&&w(!1),i.useEffect((function(){if(O){var e=setTimeout((function(){return w(!0)}),300);return function(){return clearTimeout(e)}}}),[O]),i.createElement(Qa,null,i.createElement(b.a,{appear:!0,component:null},t&&r&&i.createElement(j.a,{key:"upload"},i.createElement(Ka,{scrollToBottom:u,chatId:l,uploadEnabled:n})),y&&i.createElement(j.a,{key:"unseen"},i.createElement(B.R,{text:h,stickToEdge:s,unseenCount:o,onClick:u,onClose:d}))),y&&i.createElement(g.b,{message:h,clearOnUnmount:!0,"aria-live":"assertive"}))})),Xa=function(e){var t=Object(d.g)().Maximized.css.background;return i.createElement(ta.a,Object(u.a)({},e,{adjustToColor:t,ariaLabel:"Loading previous messages"}))};var Za=Object(f.A)("div",{target:"e1fh44if0"})({name:"1f0bicm",styles:"padding:1em;display:flex;flex-direction:column;align-items:center;justify-content:center;font-size:0.9em"}),$a=function(e){return i.createElement(Za,null,i.createElement(Gi.a,e))},eo=Object(o.c)((function(e){var t=function(){return v.M(e)},n=function(){return v.N(e,l.d)};return function(e){var r="startChatAgain"===s.i(e,l.d),i=e.getChat(l.d).properties,a=i.starting,o=i.startChatAgainPending,c=e.localize(r?"embedded_start_chat_again":"embedded_greeting_accept");return{startAction:r?n:t,buttonLabel:c,isPending:a||o}}}))((function(e){var t=e.isPending,n=e.buttonLabel,r=e.startAction,a=e.onClick,o=void 0===a?m.W:a;return i.createElement($a,{disabled:t,pending:t,onClick:function(e){r(),o(e)}},n)}));var to=Object(f.A)("div",{target:"ei7go8f1"})("position:absolute;bottom:0;left:0;right:0;background:",(function(e){return e.theme.colors.caution}),";z-index:2;color:",(function(e){return e.theme.colors.cautionContrast}),";text-align:center;font-size:0.9em;line-height:2.8em;transform:translateY(100%);"),no=Object(f.A)("div",{target:"ei7go8f0"})({name:"1fgmm64",styles:"flex-grow:1;height:100%;position:relative;min-height:0;z-index:0;-webkit-overflow-scrolling:touch"}),ro={name:"jddw9f",styles:"position:absolute;bottom:0;left:50%;z-index:3;transform:translate(-50%, 50%)"},io=function(e){return e.events[0].id},ao=function(e){return 0!==e.length?io(e[0]):void 0},oo=function(e){var t=Object(m.N)(e);if(t){var n=Object(m.N)(t.events);if(n)return n.id}};var co=Object(p.a)([function(e,t){return e.getTimeline(t)},m.D],(function(e,t){var n=s.I(t);return e.map((function(e,r){var i=0===r,a=e.showDate&&!i&&n;return Object(u.a)({},e,{isThreadBoundary:a,authorData:t.getUser(e.author)})}))}))((function(e,t){return t})),lo=Object(o.c)((function(e,t){var n=t.id,r=e.getApplicationState("isPreview")?m.W:function(){v.K(e)},i=e.localize,a=function(){return e.updateChat(n,{properties:{loadingHistory:!0}})},o=function(t){return e.requestUpdateEvent(n,t,{seen:!0}).catch(m.W)},c=function(t,r){v.D(e,n,t,r)},l=function(t){var r=t.eventId,i=t.buttonId,a=s.b(e);e.sendEvent(n,{type:"rich_message_postback",thread:a,properties:{eventId:r,postback:{id:i,toggled:!0}}},void 0)},u=function(t){return s.R(e,t)},d=function(t){return v.I(e,t)},f=function(t){return v.S(e,{properties:t})},b=function(t){var n=t.event,r=t.button;return v.q(e,n,r)};return function(e){var t=e.getChat(n),m=t.active,p=t.properties,g=p.agentIsTyping,h=p.loadingHistory,v=p.queued,j=p.ended,O=s.d(n,e),x=s.A(e,n),y=e.getUnseenCount(n),w=s.I(e)&&s.Y(e);return{agent:O,active:m,ended:j,loadHistory:a,isThreadStickerEnabled:w,hasMoreHistory:x,markAsSeen:o,sendMessage:c,queued:v,sendPostback:l,showPrechat:r,localize:i,updateSessionUser:f,showMoment:d,unseenCount:y,timeline:co(e,n,e.getState()),activeQuickReply:s.s(n,e),agentIsTyping:g&&!!O,shouldLoadHistory:x&&!h,isLoadingHistory:h,showAvatar:s.h("agentAvatar",e).enabled,pageFocused:e.getApplicationState("pageFocused"),inputMode:s.i(e,n),reconnecting:s.pb(e),displayOfflineInformation:s.nb(e),lastSeenEvent:y>0&&e.getLastSeenAgentEvent(n),isGreeting:u,handleRichGreetingButtonClicked:b,isFillableFormDisplayed:s.P(e)}}}))((function(e){var t=e,n=t.displayOfflineInformation,a=t.active,o=t.ended,s=t.activeQuickReply,p=t.agent,h=t.isThreadStickerEnabled,v=t.hasMoreHistory,O=t.pageFocused,x=t.id,y=t.inputMode,w=t.loadHistory,E=t.localize,k=t.queued,A=t.reconnecting,S=t.shouldLoadHistory,C=t.showAvatar,_=t.showPrechat,I=t.timeline,R=t.agentIsTyping,z=t.mobile,M=t.unseenCount,F=t.lastSeenEvent,P=t.scrollingDeltaSource,q=t.sendMessage,B=t.showMoment,L=t.handleRichGreetingButtonClicked,N=t.isOnBottomSource,V=t.isFillableFormDisplayed,W=t.isLoadingHistory,Y=i.useRef(null),G=Object(c.x)(!1),K=i.useRef(!1),Q=i.useRef(void 0),J=i.useState(M),X=J[0],Z=J[1],$=i.useState("hidden"),ee=$[0],te=$[1],ne=i.useState(O),re=ne[0],ie=ne[1],ae=i.useState(F)[0],oe=Object(c.d)((function(){return function(e,t,n,r){return e.some((function(e){return e.type===l.h}))?"draft":t?"newMessageDivider":r||n||!e.some((function(e){return e.events.some((function(e){return"boosters"===e.type}))}))?"form":"boosters"}(I,X,a,o)})),ce=Object(c.e)(A),le="modern"!==Object(d.g)().name&&C,se="modern"===Object(d.g)().name;i.useEffect((function(){!O&&re?ie(!1):O&&!re&&ie(!0)}),[O,re]);var ue=i.useCallback((function(e){e&&S&&w()}),[S,w]),de=i.useCallback((function(){clearTimeout(Q.current),Q.current=window.setTimeout((function(){P.next({deltaX:0,deltaY:40})}),4e3)}),[P]),me=i.useCallback((function(e){N.next(e),ie(!0),e&&V?de():clearTimeout(Q.current)}),[N,V,de]);Object(c.p)((function(){clearTimeout(Q.current)}));var fe=Object(c.u)(Y,{firstItemKey:ao(I),lastItemKey:oo(I),onIsScrolledToTopChanged:ue,onIsScrolledToBottomChanged:me,onIsUserScrollingChanged:G.next,onScrollDeltaChanged:P.next}),be=fe.scrollToTop,pe=fe.scrollToBottom,ge=fe.getIsOnBottom,he=fe.onWheel,ve=fe.onTouchStart,je=fe.getIsScrollable,Oe=fe.setScrollTargetNode,xe=i.useCallback((function(e){ge()&&pe(e)}),[ge,pe]);i.useEffect((function(){V?de():clearTimeout(Q.current)}),[V,de]);var ye=i.useCallback((function(){xe({duration:0})}),[xe]),we=function(e){return void 0===e&&(e=m.W),function(){pe({duration:0}),e()}},Ee=Object(c.r)((function(){ge()?pe():pe({duration:0}),Z(0)})),ke=function(e){var t=i.useRef(e);return i.useEffect((function(){t.current=e})),i.useMemo((function(){return{handleActionButtonClick:function(e){var n=e.button,r=e.event,i=t.current,a=i.active,o=i.showMoment,c=i.sendPostback,l=i.sendMessage,s=i.handleSendMessage,u=i.isGreeting,d=i.handleRichGreetingButtonClicked;if(u(r))return d({event:r,button:n}),void("message"===n.type&&s());if(a)switch(n.type){case"webview":return c({eventId:r,buttonId:n.postbackId}),void o({url:n.value,height:n.webviewHeight,source:"rich_message"});case"message":return l(n.text,{type:"action_button",event:r,button:n}),void s();default:return void c({eventId:r,buttonId:n.postbackId})}},markAsSeen:function(e){return t.current.markAsSeen(e)}}}),[])}(Object(u.a)({},e,{handleSendMessage:Ee})),Ae=i.useCallback((function(e){K.current=e}),[]),Se=!!(R||k||s||n);return i.useEffect((function(){Se&&xe()}),[Se,xe]),i.useEffect((function(){if(z){var e=function(){K.current&&pe({duration:0})};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}}),[z,pe]),i.useEffect((function(){return te("auto")}),[]),Object(c.t)({mainElementRef:Y,itemsCount:I.reduce((function(e,t){return e+t.events.length}),0),tableEdgeReached:function(e){"previous"===e&&be({duration:0})}}),Object(r.d)(T,{isOnBottomSource:N,beginingOfTime:I.length>0?I[0].timestamp:null,rootRef:Y},Object(r.d)(f.f,{noShrink:!0},Object(r.d)(Pt,{chatId:x,scrollingDeltaSource:P,isOnBottomSource:N,isLoadingHistory:W},h&&Object(r.d)(H,{css:ro,isUserScrollingSource:G}),A&&!ce&&Object(r.d)(i.Fragment,null,Object(r.d)(g.b,{message:E("reconnecting"),clearOnUnmount:!0,"aria-live":"assertive"}),Object(r.d)(to,null,E("reconnecting")+"\u2026")))),Object(r.d)(b.a,{appear:!0,component:null},Object(r.d)(j.d,null,Object(r.d)(no,null,Object(r.d)(Ja,{chatId:x,isScrollable:je(),isOnBottomSource:N,scrollToBottom:pe,markAsSeen:ke.markAsSeen}),Object(r.d)(f.k,{active:re,css:function(e){return function(e){var t=e.theme,n=e.overflow;return Object(r.c)("background:transparent;overscroll-behavior:contain;overflow-y:",t.isRtl?n:"auto",";position:absolute;top:0;bottom:0;left:0;right:0;")}({theme:e,overflow:ee})},onWheel:he,onTouchStart:ve,ref:Y},v&&Object(r.d)(f.q,null,Object(r.d)(Xa,{size:"medium",style:{margin:"auto"}})),I.map((function(e){return Object(r.d)(i.Fragment,{key:io(e)},e.isThreadBoundary&&Object(r.d)(D,{timestamp:e.timestamp}),ae&&X>0&&e.events.some((function(e){return e.id===ae.id}))&&Object(r.d)(U,{unseenCount:X,setScrollTargetNode:Oe}),Object(r.d)(Mr,null,Object(r.d)(f.j,Object(u.a)({isOwn:e.own,isCarousel:"carousel"===e.type,onlyFirstWithMeta:!0},le&&e.authorData.avatar&&{avatar:e.authorData.avatar}),e.events.map((function(t,n){return Object(r.d)(qr,Object(u.a)({chatId:x,id:t.id,key:t.id,showMetaOnClick:!se||0!==n,radiusType:e.radiusType,listItemHandlers:ke,scrollTarget:oe,showMoment:B,scrollToBottom:pe,increasedAvatarPadding:"carousel"===t.type&&le},!X&&{setScrollTargetNode:Oe}))})))))})),s&&Object(r.d)("div",{role:"row"},Object(r.d)("div",{role:"gridcell"},Object(r.d)(Dr.b,{"aria-labelledby":s.id,onSelect:function(e){var t=s.properties.quickReplies[e];s.properties.invitation?L({event:s.id,button:t}):q(t.text,{type:"quick_reply",event:s.id,button:t}),Ee()},replies:s.properties.quickReplies}))),R&&Object(r.d)(i.Fragment,null,Object(r.d)(g.b,{clearOnUnmount:!0,"aria-live":"polite",message:E("operator_is_typing",{operator:p.name}).replace("...","")}),Object(r.d)(b.a,{appear:!0,component:null},Object(r.d)(j.a,{exit:!1},Object(r.d)(ua.b,{avatar:le?p.avatar:null})))))))),"requestPrechat"===y?Object(r.d)($a,{onClick:we(_)},E("embedded_greeting_accept")):"startChat"===y||"startChatAgain"===y?Object(r.d)(eo,{onClick:we()}):"text"===y?Object(r.d)(di,{chatId:x,onSendMessage:Ee,onHeightChange:ye,onFocusChange:Ae}):null,Object(r.d)(sa,{chatId:x,onSendMessage:Ee}))}));function so(){var e=Object(x.a)(["\n\t&-enter,\n\t&-appear {\n\t\topacity: 0;\n\t}\n\n\t&-enter&-enter-active,\n\t&-appear&-appear-active {\n\t\topacity: 1;\n\t\ttransition: opacity ","ms ",";\n\t}\n\n\t&-exit {\n\t\topacity: 1;\n\t}\n\n\t&-exit&-exit-active {\n\t\topacity: 0;\n\t\ttransition: opacity ","ms ",";\n\t}\n"]);return so=function(){return e},e}var uo=Object(f.A)("div",{displayName:"View",section:!0,target:"e1u2umur1"})({name:"73jfg1",styles:"flex-grow:1;display:flex;height:100%;min-height:0;padding-bottom:1em"}),mo=Object(f.A)("div",{displayType:"ViewContent",target:"e1u2umur0"})("overflow-y:auto;height:100%;flex-grow:1;padding:",(function(e){return e.full?"0 !important":"1em 1em 0 1em"}),";"),fo=function(e,t){return e(so(),200,t.transitions.easings.sharp,200,t.transitions.easings.sharp)},bo={name:"1d3w5wq",styles:"width:100%"},po=function(e){var t=e.children,n=e.full,i=void 0!==n&&n;return Object(r.d)(uo,null,Object(r.d)(r.a,null,(function(e){var n=e.css,a=e.theme;return Object(r.d)(b.a,{css:bo},Object(r.d)(y.a,{appear:!0,classNames:fo(n,a),timeout:200},Object(r.d)(mo,{full:i},t)))})))},go=Object(f.A)(f.c,{target:"ea4v29u0"})("background-color:",(function(e){return e.theme.colors.surface}),";"),ho=function(){return i.createElement(o.a,null,(function(e){return i.createElement(po,null,i.createElement(go,null,i.createElement(f.m,null,e("lost_connection"))))}))};function vo(){var e=Object(x.a)(["\n\t50% {\n\t\topacity: 0.0;\n\t}\n"]);return vo=function(){return e},e}var jo=Object(r.e)(vo()),Oo=Object(r.c)("background:currentColor;opacity:0.3;animation:",jo," 1.5s linear 0s infinite;"),xo=Object(r.c)(Oo,";"),yo=Object(f.A)("div",{target:"e1uut4cd4"})("width:",(function(e){return e.width||"10em"}),";height:1em;margin:0.3em;border-radius:",(function(e){return e.theme.borderRadius.sm}),";",Oo,";"),wo=Object(f.A)("div",{target:"e1uut4cd3"})({name:"1d3w5wq",styles:"width:100%"}),Eo=Object(f.A)("div",{target:"e1uut4cd2"})({name:"66u5jz",styles:"padding:1em"}),ko=Object(f.A)("div",{target:"e1uut4cd1"})({name:"10qv9sv",styles:"width:100%;margin-top:0.5em"}),Ao=Object(f.A)("div",{displayName:"Message",section:!0,target:"e1uut4cd0"})(""),So=function(){return Object(r.d)(po,{full:!0},Object(r.d)(wo,null,Object(r.d)(f.a,null,Object(r.d)(f.b,{css:xo,letter:" "})),Object(r.d)(Eo,null,Object(r.d)(ko,null,Object(r.d)(f.q,null,Object(r.d)(Ao,null,Object(r.d)(f.c,null,Object(r.d)(f.m,null,Object(r.d)(yo,null),Object(r.d)(yo,{width:"7em"})))))),Object(r.d)(ko,null,Object(r.d)(f.q,{reverse:!0},Object(r.d)(Ao,null,Object(r.d)(f.c,null,Object(r.d)(f.m,null,Object(r.d)(yo,null)))))),Object(r.d)(ko,null,Object(r.d)(f.q,null,Object(r.d)(Ao,null,Object(r.d)(f.c,null,Object(r.d)(f.m,null,Object(r.d)(yo,null)))))))))};var Co=Object(f.A)("div",{target:"e5cxvfk0"})({name:"iwp08z",styles:"display:flex;justify-content:center;font-size:0.9em"});var To="close_chat_confirm_label",_o=Object(f.A)("p",{target:"ev8wfi80"})({name:"1azakc",styles:"text-align:center"}),Io=function(e){var t=e.localize,n=e.closeChat,r=e.onModalStateChange,a=i.useState(!1),o=a[0],c=a[1],l=i.useState(!1),s=l[0],u=l[1],d=Object(fe.b)(),m=function(){c(!1),r({isOpen:!1})};return i.createElement(i.Fragment,null,i.createElement(Ne,{description:t("close_chat")},i.createElement(B.q,{onPress:function(){c(!0),r({isOpen:!0})},"aria-label":t("close_chat")},i.createElement(B.g,{"aria-hidden":!0}))),i.createElement(Oe,{shown:o,onClose:m,"aria-labelledby":To},i.createElement(ze,{"aria-hidden":!0},i.createElement(B.n,null)),i.createElement(_o,{id:To},t("leave_chat_confirm")),i.createElement(Co,null,i.createElement(Ee.i,{destructive:!0,label:t("close_chat"),submitting:s,onClick:function(){d?m():(u(!0),n().then((function(){u(!1),m()})).catch((function(){u(!1)})))}}))))},Ro=n(660);var zo="email-transcript-sent-label",Mo="email-transcript-not-sent-label",Fo=Object(f.A)("h2",{target:"emwx8nd0"})({name:"xvo3ou",styles:"text-align:center;font-size:16px;font-weight:normal"}),Ho=function(e){var t=e.email,n=e.localize,r=e.sent,a=e.open,o=e.onClose,l=e.onSubmit,s=e.mobile,u=Object(c.i)("email-transcript"),d=i.useState((function(){return{email:t}})),b=d[0],p=d[1];return i.useEffect((function(){if(a){var e=u.get();p(e||{email:t})}}),[u,t,a]),i.createElement(Oe,{shown:a,onClose:o,"aria-labelledby":r?zo:Mo},a&&(r?i.createElement(i.Fragment,null,i.createElement(ze,{"aria-hidden":!0},i.createElement(B.v,null)),i.createElement(Fo,{id:zo,textWrap:!0},n("chat_transcript_sent").replace(/%s/g,t||"")),i.createElement(Co,null,i.createElement(Gi.a,{capitalize:!0,onClick:o},n("hide")))):i.createElement(i.Fragment,null,i.createElement(ze,{"aria-hidden":!0},i.createElement(B.v,null)),i.createElement(Fo,{id:Mo},n("send_transcript_to_email")),i.createElement(Te,{id:"email_transcript",initialValues:b,mobile:s,onSubmit:function(e){return Math.random()<.01&&Object(cn.d)("chat_transcript_ordered",{}),l(e.email).then((function(){return u.destroy()})).catch((function(){var e;return(e={})[zn.a]=n("lost_connection"),e}))},submitLabel:n("send"),validate:function(e){return e.email?{}:{email:n("survey_fill_in_required_fields")}}},i.createElement(f.q,null,i.createElement(xe.c,{onChange:function(e){var t=e.values;e.dirty&&u.set(t)}}),i.createElement(Ro.a,{ariaLabel:"Enter your email address",name:"email",required:!0,serverName:"",label:"",type:"email",localize:m.D}))))))},Po=Object(f.A)("div",{target:"eleibs71"})("display:flex;position:relative;width:44px;height:24px;border-radius:24px;background-color:",(function(e){return e.theme.colors.inactiveElement}),";will-change:background-color;transition:background-color 0.2s linear;cursor:pointer;outline-offset:2px;&::after{content:'';position:absolute;height:16px;width:16px;border-radius:16px;top:4px;left:4px;background-color:",(function(e){return e.theme.colors.surface}),";will-change:left;transition:left 0.2s ease-in;}"),qo=Object(f.A)("input",{target:"eleibs70"})("position:absolute;left:2137px;&:checked+div{background-color:",(function(e){return e.theme.colors.success}),";&::after{left:24px;}}"),Do=function(e){var t=e.checked,n=Object(O.a)(e,["checked"]);return i.createElement(i.Fragment,null,i.createElement(qo,Object(u.a)({type:"checkbox",checked:t},n)),i.createElement(Po,null))};function Bo(){var e=Object(x.a)(["\n\t&-enter {\n\t\topacity: ",";\n\n\t\t[role='menuitem'],\n\t\t[role='switch'] {\n\t\t\ttransform: translate3d(0, 20%, 0);\n\t\t}\n\t}\n\n\t&-enter-active {\n\t\topacity: 1;\n\t\ttransition: opacity 100ms ease-in-out;\n\t\t[role='menuitem'],\n\t\t[role='switch'] {\n\t\t\ttransform: translate3d(0, 0%, 0);\n\t\t\ttransition: transform 200ms;\n\t\t}\n\t}\n\n\t&-exit {\n\t\topacity: 1;\n\t}\n\n\t&-exit-active {\n\t\topacity: 0;\n\t\ttransition: opacity 100ms ease-in-out;\n\t}\n"]);return Bo=function(){return e},e}var Lo=function(e){return Object(r.c)("margin-"+(e.isRtl?"left":"right")+": 8px;","")},No=Object(f.A)("div",{target:"e1s5h2c81"})({name:"s5xdrg",styles:"display:flex;align-items:center"}),Uo=Object(f.A)(ni,{target:"e1s5h2c80"})({name:"2o6p8u",styles:"justify-content:space-between"}),Vo=function(e){return e(Bo(),"0.00001")},Wo=Object(o.c)((function(e){var t=l.d,n=function(n){return e.requestUpdateChat(t,{properties:{transcriptSentTo:n}})},r=function(){e.setApplicationState({muted:!e.getApplicationState("muted")})};return function(e){var i=e.getChat(t),a=i.active,o=i.properties,c=o.transcriptSentTo,u=mn(e,"floating-menu");return{localize:e.localize,muted:e.getApplicationState("muted"),sendTranscript:n,transcriptSentTo:c,enableTranscript:!e.getApplicationState("isPreview")&&(a||o.ended),showTranscript:Object(s.h)("emailTranscript",e).enabled,toggleSounds:r,chatTransfer:u,customerEmail:e.getSessionUser().email,showVoiceAssistant:function(){return Object(v.I)(e,{url:l.m})}}}}))((function(e){var t=e.customerEmail,n=e.enableTranscript,a=e.localize,o=e.muted,s=e.sendTranscript,u=e.showTranscript,m=e.toggleSounds,f=e.chatTransfer,p=e.transcriptSentTo,g=e.showVoiceAssistant,h=i.useState(!1),v=h[0],j=h[1],O=i.useState(!1),x=O[0],w=O[1],E=Object($.useFrame)(),k=Object(d.g)(),A=Object(be.b)();Object(c.h)(E);var S=i.useRef(null),C=!!p,T=i.useCallback((function(e){switch(e){case"sounds":return void m();case"transcript":return j(!1),void w(!0);case"identityTransfer":return Object(cn.d)("chat_app_button_clicked",{ui_source:"menu"}),j(!1),void f.showMoment();case"voiceAssistant":j(!1),g()}}),[m,f,g]);return Object(c.q)((function(){v&&Math.random()<.01&&Object(cn.d)("meatballs_menu_opened",{})}),[v]),i.useEffect((function(){return A.setMenuOpen(v)}),[v,A]),Object(r.d)(i.Fragment,null,Object(r.d)(Ne,{isDisabled:v,description:a("theme_options")},Object(r.d)(B.q,{css:Object(r.c)("padding:0;height:32px;background-color:",v?k.colors.lighterOppositeTitleBarColor:"transparent",";"),ref:S,onPress:function(){return j((function(e){return!e}))},active:v,"aria-label":v?"Close menu":"Open menu","aria-expanded":v,"aria-haspopup":!0},Object(r.d)(B.i,{"aria-hidden":!0,color:k.colors.titleBarText}))),Object(r.d)(r.a,null,(function(e){var t=e.css;return Object(r.d)(b.a,{component:null},v&&Object(r.d)(y.a,{classNames:Vo(t),timeout:200},Object(r.d)(ei,{menuButtonRef:S,onClose:function(){return j(!1)},onSelect:T},u&&Object(r.d)(ni,{disabled:!n,text:a("send_transcript"),value:"transcript"},Object(r.d)(B.v,{css:Lo(k),"aria-hidden":!0}),a("send_transcript")),f.available&&Object(r.d)(ni,{text:l.i,value:"identityTransfer",disabled:f.disabled},Object(r.d)(B.x,{css:Lo(k),"aria-hidden":!0}),l.i),Object(r.d)(Uo,{text:a(o?"unmute":"mute"),"aria-label":o?a("sounds")+" "+a("unmute"):a("sounds")+" "+a("mute"),value:"sounds"},Object(r.d)(No,null,o?Object(r.d)(B.y,{css:Lo(k),"aria-hidden":!0}):Object(r.d)(B.P,{css:Lo(k),"aria-hidden":!0}),Object(r.d)("span",{"aria-hidden":!0},a("sounds"))),Object(r.d)(Do,{checked:!o,onChange:function(){return!o},"aria-hidden":!0})),!1)))})),Object(r.d)(Ho,{email:C?p:t,localize:a,onClose:function(){return w(!1)},onSubmit:s,sent:C,open:x}))})),Yo=n(229);var Go=function(e){return"modern"===e?28:32},Ko=window.matchMedia("(max-height: 330px)"),Qo=function(e,t){return function(n){return Object(r.c)("overflow:hidden;flex-grow:0;text-align:left;padding:0 0.8em;font-weight:700;display:flex;align-items:center;transition:0.3s background-color;z-index:",e?103:2,";pointer-events:",e?"none":"all",";box-shadow:",t?n.boxShadow.md:"none",";")}},Jo=Object(f.A)("div",{displayName:"IconPlaceholder",target:"e7bf83j4"})({name:"febvbf",styles:"width:25px;flex-shrink:0"}),Xo=function(e){return Object(r.c)("height:30px;line-height:30px;font-size:inherit;font-weight:700;margin-top:0;margin-bottom:0;transition:opacity 100ms ",e.transitions.easings.smooth,";")},Zo=Object(f.A)("h1",{target:"e7bf83j3"})((function(e){var t=e.theme;return Xo(t)}),";"),$o=Object(f.A)("button",{target:"e7bf83j2"})((function(e){var t=e.theme;return Xo(t)})," width:100%;height:",(function(e){return"modern"===e.theme.name?"24px":"32px"}),";display:flex;flex-direction:row;justify-content:center;align-items:center;position:relative;color:inherit;background:none;border:none;cursor:pointer;appearance:none;"),ec=Object(f.A)("span",{target:"e7bf83j1"})({name:"ovk77c",styles:"min-width:0"}),tc=Object(f.A)("div",{target:"e7bf83j0"})(""),nc=function(e){return Object(m.hb)(e-1).map((function(e){return Object(r.d)(Jo,{key:"placeholder_"+e})}))},rc={name:"21xn5r",styles:"transform:rotate(180deg)"},ic=Object(o.c)((function(e){var t=function(e,t){return e&&e.name&&t?e.name:""},n=function(){return e.requestUpdateChat(l.d,{active:!1})},r=function(){e.setCurrentView("Homescreen")},i=e.getApplicationState("embedded");return function(e){var a=Object(s.d)(l.d,e),o=!(Object(s.ob)(e)||Object(s.nb)(e)),c=Object(s.kb)(e);return{embedded:i,closeChat:n,title:e.localize("welcome_title"),alternateTitle:t(a,c),agent:a,showAlternateTitle:o,titleBarShownAlone:o&&!c,showCloseButton:e.getChat(l.d).active,localize:e.localize,showAgentBar:c,showAvatar:Object(s.h)("agentAvatar",e).enabled,isDropAreaVisible:e.getApplicationState("dropAreaVisible"),showBackButton:"Homescreen"===e.getDefaultView(),goToHomescreen:r}}}))((function(e){var t=e.showCloseButton,n=e.closeChat,a=e.localize,o=e.showMinimizedButton,l=e.title,s=e.alternateTitle,m=e.onMinimize,b=e.showAgentBar,p=e.showAlternateTitle,g=e.titleBarShownAlone,h=e.scrollingDeltaSource,v=e.agent,j=e.showAvatar,O=e.isOnBottomSource,x=e.isDropAreaVisible,y=e.showBackButton,w=e.goToHomescreen,E=Object(d.g)(),k=i.useRef(),A=i.useRef(),S=i.useRef(),C=i.useRef(Ko.matches),T=i.useState(!0),_=T[0],I=T[1],R=i.useState(!1),z=R[0],M=R[1],F=Object(re.f)(),H=E.name,P=i.useCallback((function(){k.current&&(k.current.style.opacity=1),A.current&&(A.current.style.opacity=0),S.current&&(S.current.style.transform="translateY("+Go(H)+"px)"),I(!0)}),[H]),q=i.useCallback((function(){if(p&&(h.next({deltaX:0,deltaY:-50}),F.focusVisible)){var e=Object(Jr.d)(document.getElementById(dt))[0];e&&e.focus()}}),[F.focusVisible,h,p]);Object(c.o)(P),Object(c.a)(h,(function(e){var t=e.y;s&&!C.current&&(k.current&&(k.current.style.opacity=1-2*t),A.current&&(A.current.style.opacity=t),S.current&&(S.current.style.transform=0===t?"translateY("+Go(H)+"px)":"translateY("+(Go(H)-60*t+("modern"===H?4:0))+"px)"),1===t&&_?I(!1):0!==t||_||I(!0))})),i.useEffect((function(){b&&s||P()}),[b,P,s]),i.useEffect((function(){var e=function(e){var t=e.matches;return C.current=t};return Ko.addListener(e),function(){return Ko.removeListener(e)}}),[]),i.useEffect((function(){if(O)return O.subscribe((function(e){e&&P()}))}),[O,P]);var D=function(e,t){var n=e.filter(Boolean),r=t.filter(Boolean);return n.length===r.length?{leftIcons:n,rightIcons:r}:n.length>r.length?{leftIcons:n,rightIcons:nc(n.length-r.length).concat(r)}:{leftIcons:n.concat(nc(r.length-n.length)),rightIcons:r}}([y&&Object(r.d)(B.q,{key:"back",onPress:w},Object(r.d)(Yo.a,{"aria-hidden":!0,css:rc})),Object(r.d)(Wo,{key:"menu"})],[o&&Object(r.d)(Ne,{key:"minimize",description:a("embedded_minimize_window")},Object(r.d)(B.q,{onPress:m,"aria-label":a("embedded_minimize_window")},Object(r.d)(B.w,{"aria-hidden":!0}))),(t||z)&&Object(r.d)(Io,{key:"close",closeChat:n,localize:a,onModalStateChange:function(e){var t=e.isOpen;return M(t)}})]),L=D.leftIcons,N=D.rightIcons,U="modern"===H?"small":"normal";return Object(r.d)(f.x,{css:Qo(x,g),leftIcons:L,noShrink:!0,rightIcons:N,title:Object(r.d)(tc,{ref:S},Object(r.d)(Zo,{ellipsis:!0,ref:k,style:{marginBottom:30},"aria-expanded":_},Object(r.d)($e.a,null,l)),Object(r.d)($o,Object(u.a)({ref:A,disabled:_,onClick:q,"aria-expanded":_,"aria-controls":dt,"aria-label":s||l},F),p&&Object(r.d)(i.Fragment,null,v&&b&&j&&Object(r.d)(Ze,{avatarUrl:v.avatar,size:U,availability:"online"}),v&&!j&&Object(r.d)(Ze,{size:U,availability:"online"}),Object(r.d)(ec,{ellipsis:!0},s))))})})),ac=n(669),oc=n(666),cc=i.lazy((function(){return n.e(5).then(n.bind(null,684))}));t.default=Object(o.c)((function(e){return{destroyed:e.getApplicationState().destroyed,showLoader:Object(s.lb)(e),defaultWidget:e.getApplicationState().defaultWidget,currentView:e.getCurrentView()}}))((function(e){var t=e.destroyed,n=e.showLoader,i=e.currentView,a=e.defaultWidget,o=e.onMinimizeButtonPress,s=e.showMinimizedButton,u=Object(c.x)(!0),d=Object(c.x)({x:0,y:0});return t?Object(r.d)(ho,null):"openwidget"===a&&i&&"Chat"!==i?Object(r.d)(cc,{currentView:i}):n?Object(r.d)(So,null):Object(r.d)(oc.a,null,Object(r.d)(ic,{isOnBottomSource:u,onMinimize:o,showMinimizedButton:s,scrollingDeltaSource:d}),Object(r.d)(lo,{id:l.d,scrollingDeltaSource:d,isOnBottomSource:u}),Object(r.d)(ac.a,null))}))}}]);